"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3587],{3587:(Zt,$e,ye)=>{ye.r($e),ye.d($e,{Exifr:()=>R,Options:()=>M,allFormatters:()=>w,chunkedProps:()=>x,createDictionary:()=>y,default:()=>qt,extendDictionary:()=>B,fetchUrlAsArrayBuffer:()=>F,fileParsers:()=>A,fileReaders:()=>k,gps:()=>Me,gpsOnlyOptions:()=>oe,inheritables:()=>H,orientation:()=>he,orientationOnlyOptions:()=>ue,otherSegments:()=>z,parse:()=>Y,readBlobAsArrayBuffer:()=>E,rotateCanvas:()=>G,rotateCss:()=>_,rotation:()=>Ne,rotations:()=>fe,segmentParsers:()=>p,segments:()=>N,segmentsAndBlocks:()=>D,sidecar:()=>Xt,tagKeys:()=>C,tagRevivers:()=>v,tagValues:()=>I,thumbnail:()=>Le,thumbnailOnlyOptions:()=>le,thumbnailUrl:()=>Fe,tiffBlocks:()=>g,tiffExtractables:()=>O});var u=ye(467),Q=typeof self<"u"?self:global;const K=typeof navigator<"u",Tt=K&&typeof HTMLImageElement>"u",Z=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),ee=Q.Buffer,te=Q.BigInt,ie=!!ee,vt=n=>n;function ne(n,e=vt){if(Z)try{return"function"==typeof require?Promise.resolve(e(require(n))):import(n).then(e)}catch{console.warn(`Couldn't load ${n}`)}}let Se=Q.fetch;if(!Q.fetch){const n=ne("http",i=>i),e=ne("https",i=>i),t=(i,{headers:r}={})=>new Promise(function(){var s=(0,u.A)(function*(a,o){let{port:l,hostname:h,pathname:c,protocol:d,search:S}=new URL(i);const U={method:"GET",hostname:h,path:encodeURI(c)+S,headers:r};""!==l&&(U.port=Number(l));const q=("https:"===d?yield e:yield n).request(U,W=>{if(301===W.statusCode||302===W.statusCode){let Ye=new URL(W.headers.location,i).toString();return t(Ye,{headers:r}).then(a).catch(o)}a({status:W.statusCode,arrayBuffer:()=>new Promise(Ye=>{let kt=[];W.on("data",Qt=>kt.push(Qt)),W.on("end",()=>Ye(Buffer.concat(kt)))})})});q.on("error",o),q.end()});return function(a,o){return s.apply(this,arguments)}}());(n=>{Se=n})(t)}function f(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const re=n=>Je(n)?void 0:n,Dt=n=>void 0!==n;function Je(n){return void 0===n||(n instanceof Map?0===n.size:0===Object.values(n).filter(Dt).length)}function m(n){let e=new Error(n);throw delete e.stack,e}function V(n){return""===(n=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(n).trim())?void 0:n}function Ce(n){let e=function(t){let i=0;return t.ifd0.enabled&&(i+=1024),t.exif.enabled&&(i+=2048),t.makerNote&&(i+=2048),t.userComment&&(i+=1024),t.gps.enabled&&(i+=512),t.interop.enabled&&(i+=100),t.ifd1.enabled&&(i+=1024),i+2048}(n);return n.jfif.enabled&&(e+=50),n.xmp.enabled&&(e+=2e4),n.iptc.enabled&&(e+=14e3),n.icc.enabled&&(e+=6e3),e}const be=n=>String.fromCharCode.apply(null,n),qe=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0;function Qe(n){return qe?qe.decode(n):ie?Buffer.from(n).toString("utf8"):decodeURIComponent(escape(be(n)))}class P{static from(e,t){return e instanceof this&&e.le===t?e:new P(e,void 0,void 0,t)}constructor(e,t=0,i,r){if("boolean"==typeof r&&(this.le=r),Array.isArray(e)&&(e=new Uint8Array(e)),0===e)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){void 0===i&&(i=e.byteLength-t);let s=new DataView(e,t,i);this._swapDataView(s)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof P){void 0===i&&(i=e.byteLength-t),(t+=e.byteOffset)+i>e.byteOffset+e.byteLength&&m("Creating view outside of available memory in ArrayBuffer");let s=new DataView(e.buffer,t,i);this._swapDataView(s)}else if("number"==typeof e){let s=new DataView(new ArrayBuffer(e));this._swapDataView(s)}else m("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,i=P){return e instanceof DataView||e instanceof P?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||m("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new i(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new P(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return Qe(this.getUint8Array(e,t))}getLatin1String(e=0,t=this.byteLength){let i=this.getUint8Array(e,t);return be(i)}getUnicodeString(e=0,t=this.byteLength){const i=[];for(let r=0;r<t&&e+r<this.byteLength;r+=2)i.push(this.getUint16(e+r));return be(i)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,i){switch(t){case 1:return this.getUint8(e,i);case 2:return this.getUint16(e,i);case 4:return this.getUint32(e,i);case 8:return this.getUint64&&this.getUint64(e,i)}}getUint(e,t,i){switch(t){case 8:return this.getUint8(e,i);case 16:return this.getUint16(e,i);case 32:return this.getUint32(e,i);case 64:return this.getUint64&&this.getUint64(e,i)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function Pe(n,e){m(`${n} '${e}' was not loaded, try using full build of exifr.`)}class Ie extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||Pe(this.kind,e),t&&(e in t||m(`Unknown ${this.kind} '${e}'.`),t[e].enabled||Pe(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var A=new Ie("file parser"),p=new Ie("segment parser"),k=new Ie("file reader");function Ze(n,e){return"string"==typeof n?et(n,e):K&&!Tt&&n instanceof HTMLImageElement?et(n.src,e):n instanceof Uint8Array||n instanceof ArrayBuffer||n instanceof DataView?new P(n):K&&n instanceof Blob?Ae(n,e,"blob",E):void m("Invalid input argument")}function et(n,e){return(t=n).startsWith("data:")||t.length>1e4?Te(n,e,"base64"):Z&&n.includes("://")?Ae(n,e,"url",F):Z?Te(n,e,"fs"):K?Ae(n,e,"url",F):void m("Invalid input argument");var t}function Ae(n,e,t,i){return ke.apply(this,arguments)}function ke(){return ke=(0,u.A)(function*(n,e,t,i){return k.has(t)?Te(n,e,t):i?(r=(0,u.A)(function*(s,a){let o=yield a(s);return new P(o)}),function(s,a){return r.apply(this,arguments)})(n,i):void m(`Parser ${t} is not loaded`);var r}),ke.apply(this,arguments)}function Te(n,e,t){return ve.apply(this,arguments)}function ve(){return(ve=(0,u.A)(function*(n,e,t){let i=new(k.get(t))(n,e);return yield i.read(),i})).apply(this,arguments)}const F=n=>Se(n).then(e=>e.arrayBuffer()),E=n=>new Promise((e,t)=>{let i=new FileReader;i.onloadend=()=>e(i.result||new ArrayBuffer),i.onerror=t,i.readAsArrayBuffer(n)});class Ot extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function y(n,e,t){let i=new Ot;for(let[r,s]of t)i.set(r,s);if(Array.isArray(e))for(let r of e)n.set(r,i);else n.set(e,i);return i}function B(n,e,t){let i,r=n.get(e);for(i of t)r.set(i[0],i[1])}const C=new Map,I=new Map,v=new Map,x=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],z=["jfif","xmp","icc","iptc","ihdr"],N=["tiff",...z],g=["ifd0","ifd1","exif","gps","interop"],D=[...N,...g],O=["makerNote","userComment"],H=["translateKeys","translateValues","reviveValues","multiSegment"],w=[...H,"sanitize","mergeOutput","silentErrors"];class tt{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class X extends tt{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,i,r){if(super(),f(this,"enabled",!1),f(this,"skip",new Set),f(this,"pick",new Set),f(this,"deps",new Set),f(this,"translateKeys",!1),f(this,"translateValues",!1),f(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(r),this.canBeFiltered=g.includes(e),this.canBeFiltered&&(this.dict=C.get(e)),void 0!==i)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if("object"==typeof i){if(this.enabled=!0,this.parse=!1!==i.parse,this.canBeFiltered){let{pick:s,skip:a}=i;s&&s.length>0&&this.translateTagSet(s,this.pick),a&&a.length>0&&this.translateTagSet(a,this.skip)}this.applyInheritables(i)}else!0===i||!1===i?this.parse=this.enabled=i:m(`Invalid options argument: ${i}`)}applyInheritables(e){let t,i;for(t of H)i=e[t],void 0!==i&&(this[t]=i)}translateTagSet(e,t){if(this.dict){let i,r,{tagKeys:s,tagValues:a}=this.dict;for(i of e)"string"==typeof i?(r=a.indexOf(i),-1===r&&(r=s.indexOf(Number(i))),-1!==r&&t.add(Number(s[r]))):t.add(i)}else for(let i of e)t.add(i)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,se(this.pick,this.deps)):this.enabled&&this.pick.size>0&&se(this.pick,this.deps)}}var b={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},it=new Map;class M extends tt{static useCached(e){let t=it.get(e);return void 0!==t||(t=new this(e),it.set(e,t)),t}constructor(e){super(),!0===e?this.setupFromTrue():void 0===e?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):"object"==typeof e?this.setupFromObject(e):m(`Invalid options argument ${e}`),void 0===this.firstChunkSize&&(this.firstChunkSize=K?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of x)this[e]=b[e];for(e of w)this[e]=b[e];for(e of O)this[e]=b[e];for(e of D)this[e]=new X(e,b[e],void 0,this)}setupFromTrue(){let e;for(e of x)this[e]=b[e];for(e of w)this[e]=b[e];for(e of O)this[e]=!0;for(e of D)this[e]=new X(e,!0,void 0,this)}setupFromArray(e){let t;for(t of x)this[t]=b[t];for(t of w)this[t]=b[t];for(t of O)this[t]=b[t];for(t of D)this[t]=new X(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,g)}setupFromObject(e){let t;for(t of(g.ifd0=g.ifd0||g.image,g.ifd1=g.ifd1||g.thumbnail,Object.assign(this,e),x))this[t]=xe(e[t],b[t]);for(t of w)this[t]=xe(e[t],b[t]);for(t of O)this[t]=xe(e[t],b[t]);for(t of N)this[t]=new X(t,b[t],e[t],this);for(t of g)this[t]=new X(t,b[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,g,D),!0===e.tiff?this.batchEnableWithBool(g,!0):!1===e.tiff?this.batchEnableWithUserValue(g,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,g):"object"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,g)}batchEnableWithBool(e,t){for(let i of e)this[i].enabled=t}batchEnableWithUserValue(e,t){for(let i of e){let r=t[i];this[i].enabled=!1!==r&&void 0!==r}}setupGlobalFilters(e,t,i,r=i){if(e&&e.length){for(let a of r)this[a].enabled=!1;let s=nt(e,i);for(let[a,o]of s)se(this[a].pick,o),this[a].enabled=!0}else if(t&&t.length){let s=nt(t,i);for(let[a,o]of s)se(this[a].skip,o)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:i,iptc:r,icc:s}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),i.enabled||e.skip.add(700),r.enabled||e.skip.add(33723),s.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:i,interop:r}=this;r.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),i.needed&&e.deps.add(34853),this.tiff.enabled=g.some(s=>!0===this[s].enabled)||this.makerNote||this.userComment;for(let s of g)this[s].finalizeFilters()}get onlyTiff(){return!z.map(e=>this[e].enabled).some(e=>!0===e)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of N)this[e].enabled&&!p.has(e)&&Pe("segment parser",e)}}function nt(n,e){let t,i,r,s,a=[];for(r of e){for(s of(t=C.get(r),i=[],t))(n.includes(s[0])||n.includes(s[1]))&&i.push(s[0]);i.length&&a.push([r,i])}return a}function xe(n,e){return void 0!==n?n:void 0!==e?e:void 0}function se(n,e){for(let t of e)n.add(t)}f(M,"default",b);class R{constructor(e){f(this,"parsers",{}),f(this,"output",{}),f(this,"errors",[]),f(this,"pushToErrors",t=>this.errors.push(t)),this.options=M.useCached(e)}read(e){var t=this;return(0,u.A)(function*(){t.file=yield Ze(e,t.options)})()}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[i,r]of A)if(r.canHandle(e,t))return this.fileParser=new r(this.options,this.file,this.parsers),e[i]=!0;this.file.close&&this.file.close(),m("Unknown file format")}parse(){var e=this;return(0,u.A)(function*(){let{output:t,errors:i}=e;return e.setup(),e.options.silentErrors?(yield e.executeParsers().catch(e.pushToErrors),i.push(...e.fileParser.errors)):yield e.executeParsers(),e.file.close&&e.file.close(),e.options.silentErrors&&i.length>0&&(t.errors=i),re(t)})()}executeParsers(){var e=this;return(0,u.A)(function*(){let{output:t}=e;yield e.fileParser.parse();let i=Object.values(e.parsers).map(function(){var r=(0,u.A)(function*(s){let a=yield s.parse();s.assignToOutput(t,a)});return function(s){return r.apply(this,arguments)}}());e.options.silentErrors&&(i=i.map(r=>r.catch(e.pushToErrors))),yield Promise.all(i)})()}extractThumbnail(){var e=this;return(0,u.A)(function*(){e.setup();let{options:t,file:i}=e,r=p.get("tiff",t);var s;if(i.tiff?s={start:0,type:"tiff"}:i.jpeg&&(s=yield e.fileParser.getOrFindSegment("tiff")),void 0===s)return;let a=yield e.fileParser.ensureSegmentChunk(s),o=e.parsers.tiff=new r(a,t,i),l=yield o.extractThumbnail();return i.close&&i.close(),l})()}}function Y(n,e){return De.apply(this,arguments)}function De(){return(De=(0,u.A)(function*(n,e){let t=new R(e);return yield t.read(n),t.parse()})).apply(this,arguments)}var wt=Object.freeze({__proto__:null,parse:Y,Exifr:R,fileParsers:A,segmentParsers:p,fileReaders:k,tagKeys:C,tagValues:I,tagRevivers:v,createDictionary:y,extendDictionary:B,fetchUrlAsArrayBuffer:F,readBlobAsArrayBuffer:E,chunkedProps:x,otherSegments:z,segments:N,tiffBlocks:g,segmentsAndBlocks:D,tiffExtractables:O,inheritables:H,allFormatters:w,Options:M});class ae{constructor(e,t,i){var r=this;f(this,"errors",[]),f(this,"ensureSegmentChunk",function(){var s=(0,u.A)(function*(a){let o=a.start,l=a.size||65536;if(r.file.chunked)if(r.file.available(o,l))a.chunk=r.file.subarray(o,l);else try{a.chunk=yield r.file.readChunk(o,l)}catch(h){m(`Couldn't read segment: ${JSON.stringify(a)}. ${h.message}`)}else r.file.byteLength>o+l?a.chunk=r.file.subarray(o,l):void 0===a.size?a.chunk=r.file.subarray(o):m("Segment unreachable: "+JSON.stringify(a));return a.chunk});return function(a){return s.apply(this,arguments)}}()),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=i}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let i=new(p.get(e))(t,this.options,this.file);return this.parsers[e]=i}createParsers(e){for(let t of e){let{type:i,chunk:r}=t,s=this.options[i];if(s&&s.enabled){let a=this.parsers[i];a&&a.append||a||this.createParser(i,r)}}}readSegments(e){var t=this;return(0,u.A)(function*(){let i=e.map(t.ensureSegmentChunk);yield Promise.all(i)})()}}class T{static findPosition(e,t){let i=e.getUint16(t+2)+2,r="function"==typeof this.headerLength?this.headerLength(e,t,i):this.headerLength,s=t+r,a=i-r;return{offset:t,length:i,headerLength:r,start:s,size:a,end:s+a}}static parse(e,t={}){return new this(e,new M({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof P?e:new P(e)}constructor(e,t={},i){f(this,"errors",[]),f(this,"raw",new Map),f(this,"handleError",r=>{if(!this.options.silentErrors)throw r;this.errors.push(r.message)}),this.chunk=this.normalizeInput(e),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let i=v.get(t),r=I.get(t),s=C.get(t),a=this.options[t],o=a.reviveValues&&!!i,l=a.translateValues&&!!r,h=a.translateKeys&&!!s,c={};for(let[d,S]of e)o&&i.has(d)?S=i.get(d)(S):l&&r.has(d)&&(S=this.translateValue(S,r.get(d))),h&&s.has(d)&&(d=s.get(d)||d),c[d]=S;return c}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,i){if(this.globalOptions.mergeOutput)return Object.assign(e,i);e[t]?Object.assign(e[t],i):e[t]=i}}function Mt(n){return 192===n||194===n||196===n||219===n||221===n||218===n||254===n}function Rt(n){return n>=224&&n<=239}function Lt(n,e,t){for(let[i,r]of p)if(r.canHandle(n,e,t))return i}f(T,"headerLength",4),f(T,"type",void 0),f(T,"multiSegment",!1),f(T,"canHandle",()=>!1);class rt extends ae{constructor(...e){super(...e),f(this,"appSegments",[]),f(this,"jpegSegments",[]),f(this,"unknownSegments",[])}static canHandle(e,t){return 65496===t}parse(){var e=this;return(0,u.A)(function*(){yield e.findAppSegments(),yield e.readSegments(e.appSegments),e.mergeMultiSegments(),e.createParsers(e.mergedAppSegments||e.appSegments)})()}setupSegmentFinderArgs(e){!0===e?(this.findAll=!0,this.wanted=new Set(p.keyList())):(e=void 0===e?p.keyList().filter(t=>this.options[t].enabled):e.filter(t=>this.options[t].enabled&&p.has(t)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}findAppSegments(){var e=this;return(0,u.A)(function*(t=0,i){e.setupSegmentFinderArgs(i);let{file:r,findAll:s,wanted:a,remaining:o}=e;if(!s&&e.file.chunked&&(s=Array.from(a).some(l=>p.get(l).multiSegment&&e.options[l].multiSegment),s&&(yield e.file.readWhole())),t=e.findAppSegmentsInRange(t,r.byteLength),!e.options.onlyTiff&&r.chunked){let l=!1;for(;o.size>0&&!l&&(r.canReadNextChunk||e.unfinishedMultiSegment);){let{nextChunkOffset:h}=r,c=e.appSegments.some(d=>!e.file.available(d.offset||d.start,d.length||d.size));if(l=t>h&&!c?!(yield r.readNextChunk(t)):!(yield r.readNextChunk(h)),void 0===(t=e.findAppSegmentsInRange(t,r.byteLength)))return}}}).apply(this,arguments)}findAppSegmentsInRange(e,t){t-=2;let i,r,s,a,o,l,{file:h,findAll:c,wanted:d,remaining:S,options:U}=this;for(;e<t;e++)if(255===h.getUint8(e))if(i=h.getUint8(e+1),Rt(i)){if(r=h.getUint16(e+2),s=Lt(h,e,r),s&&d.has(s)&&(a=p.get(s),o=a.findPosition(h,e),l=U[s],o.type=s,this.appSegments.push(o),!c&&(a.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=o.chunkNumber<o.chunkCount,this.unfinishedMultiSegment||S.delete(s)):S.delete(s),0===S.size)))break;U.recordUnknownSegments&&(o=T.findPosition(h,e),o.marker=i,this.unknownSegments.push(o)),e+=r+1}else if(Mt(i)){if(r=h.getUint16(e+2),218===i&&!1!==U.stopAfterSos)return;U.recordJpegSegments&&this.jpegSegments.push({offset:e,length:r,marker:i}),e+=r+1}return e}mergeMultiSegments(){if(!this.appSegments.some(t=>t.multiSegment))return;let e=function(t){let r,s,a,o=new Map;for(let l=0;l<t.length;l++)r=t[l],s=r.type,o.has(s)?a=o.get(s):o.set(s,a=[]),a.push(r);return Array.from(o)}(this.appSegments);this.mergedAppSegments=e.map(([t,i])=>{let r=p.get(t,this.options);return r.handleMultiSegments?{type:t,chunk:r.handleMultiSegments(i)}:i[0]})}getSegment(e){return this.appSegments.find(t=>t.type===e)}getOrFindSegment(e){var t=this;return(0,u.A)(function*(){let i=t.getSegment(e);return void 0===i&&(yield t.findAppSegments(0,[e]),i=t.getSegment(e)),i})()}}f(rt,"type","jpeg"),A.set("jpeg",rt);const Ut=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class Ft extends T{parseHeader(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,i=new Map){let{pick:r,skip:s}=this.options[t];r=new Set(r);let a=r.size>0,o=0===s.size,l=this.chunk.getUint16(e);e+=2;for(let h=0;h<l;h++){let c=this.chunk.getUint16(e);if(a){if(r.has(c)&&(i.set(c,this.parseTag(e,c,t)),r.delete(c),0===r.size))break}else!o&&s.has(c)||i.set(c,this.parseTag(e,c,t));e+=12}return i}parseTag(e,t,i){let{chunk:r}=this,s=r.getUint16(e+2),a=r.getUint32(e+4),o=Ut[s];if(o*a<=4?e+=8:e=r.getUint32(e+8),(s<1||s>13)&&m(`Invalid TIFF value type. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${s}, offset ${e}`),e>r.byteLength&&m(`Invalid TIFF value offset. block: ${i.toUpperCase()}, tag: ${t.toString(16)}, type: ${s}, offset ${e} is outside of chunk size ${r.byteLength}`),1===s)return r.getUint8Array(e,a);if(2===s)return V(r.getString(e,a));if(7===s)return r.getUint8Array(e,a);if(1===a)return this.parseTagValue(s,e);{let l=new(function(c){switch(c){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:case 10:default:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 11:return Float32Array;case 12:return Float64Array}}(s))(a),h=o;for(let c=0;c<a;c++)l[c]=this.parseTagValue(s,e),e+=h;return l}}parseTagValue(e,t){let{chunk:i}=this;switch(e){case 1:return i.getUint8(t);case 3:return i.getUint16(t);case 4:case 13:return i.getUint32(t);case 5:return i.getUint32(t)/i.getUint32(t+4);case 6:return i.getInt8(t);case 8:return i.getInt16(t);case 9:return i.getInt32(t);case 10:return i.getInt32(t)/i.getInt32(t+4);case 11:return i.getFloat(t);case 12:return i.getDouble(t);default:m(`Invalid tiff type ${e}`)}}}class Oe extends Ft{static canHandle(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}parse(){var e=this;return(0,u.A)(function*(){e.parseHeader();let{options:t}=e;return t.ifd0.enabled&&(yield e.parseIfd0Block()),t.exif.enabled&&(yield e.safeParse("parseExifBlock")),t.gps.enabled&&(yield e.safeParse("parseGpsBlock")),t.interop.enabled&&(yield e.safeParse("parseInteropBlock")),t.ifd1.enabled&&(yield e.safeParse("parseThumbnailBlock")),e.createOutput()})()}safeParse(e){let t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset);this.ifd1Offset=this.chunk.getUint32(this.ifd0Offset+2+12*e)}}parseBlock(e,t){let i=new Map;return this[t]=i,this.parseTags(e,t,i),i}parseIfd0Block(){var e=this;return(0,u.A)(function*(){if(e.ifd0)return;let{file:t}=e;e.findIfd0Offset(),e.ifd0Offset<8&&m("Malformed EXIF data"),!t.chunked&&e.ifd0Offset>t.byteLength&&m(`IFD0 offset points to outside of file.\nthis.ifd0Offset: ${e.ifd0Offset}, file.byteLength: ${t.byteLength}`),t.tiff&&(yield t.ensureChunk(e.ifd0Offset,Ce(e.options)));let i=e.parseBlock(e.ifd0Offset,"ifd0");return 0!==i.size?(e.exifOffset=i.get(34665),e.interopOffset=i.get(40965),e.gpsOffset=i.get(34853),e.xmp=i.get(700),e.iptc=i.get(33723),e.icc=i.get(34675),e.options.sanitize&&(i.delete(34665),i.delete(40965),i.delete(34853),i.delete(700),i.delete(33723),i.delete(34675)),i):void 0})()}parseExifBlock(){var e=this;return(0,u.A)(function*(){if(e.exif||(e.ifd0||(yield e.parseIfd0Block()),void 0===e.exifOffset))return;e.file.tiff&&(yield e.file.ensureChunk(e.exifOffset,Ce(e.options)));let t=e.parseBlock(e.exifOffset,"exif");return e.interopOffset||(e.interopOffset=t.get(40965)),e.makerNote=t.get(37500),e.userComment=t.get(37510),e.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),e.unpack(t,41728),e.unpack(t,41729),t})()}unpack(e,t){let i=e.get(t);i&&1===i.length&&e.set(t,i[0])}parseGpsBlock(){var e=this;return(0,u.A)(function*(){if(e.gps||(e.ifd0||(yield e.parseIfd0Block()),void 0===e.gpsOffset))return;let t=e.parseBlock(e.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",st(...t.get(2),t.get(1))),t.set("longitude",st(...t.get(4),t.get(3)))),t})()}parseInteropBlock(){var e=this;return(0,u.A)(function*(){if(!e.interop&&(e.ifd0||(yield e.parseIfd0Block()),void 0!==e.interopOffset||e.exif||(yield e.parseExifBlock()),void 0!==e.interopOffset))return e.parseBlock(e.interopOffset,"interop")})()}parseThumbnailBlock(){var e=this;return(0,u.A)(function*(t=!1){if(!e.ifd1&&!e.ifd1Parsed&&(!e.options.mergeOutput||t))return e.findIfd1Offset(),e.ifd1Offset>0&&(e.parseBlock(e.ifd1Offset,"ifd1"),e.ifd1Parsed=!0),e.ifd1}).apply(this,arguments)}extractThumbnail(){var e=this;return(0,u.A)(function*(){if(e.headerParsed||e.parseHeader(),e.ifd1Parsed||(yield e.parseThumbnailBlock(!0)),void 0===e.ifd1)return;let t=e.ifd1.get(513),i=e.ifd1.get(514);return e.chunk.getUint8Array(t,i)})()}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,i,r={};for(t of g)if(e=this[t],!Je(e))if(i=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if("ifd1"===t)continue;Object.assign(r,i)}else r[t]=i;return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[i,r]of Object.entries(t))this.assignObjectToOutput(e,i,r)}}function st(n,e,t,i){var r=n+e/60+t/3600;return"S"!==i&&"W"!==i||(r*=-1),r}f(Oe,"type","tiff"),f(Oe,"headerLength",10),p.set("tiff",Oe);var Et=Object.freeze({__proto__:null,default:wt,Exifr:R,fileParsers:A,segmentParsers:p,fileReaders:k,tagKeys:C,tagValues:I,tagRevivers:v,createDictionary:y,extendDictionary:B,fetchUrlAsArrayBuffer:F,readBlobAsArrayBuffer:E,chunkedProps:x,otherSegments:z,segments:N,tiffBlocks:g,segmentsAndBlocks:D,tiffExtractables:O,inheritables:H,allFormatters:w,Options:M,parse:Y});const we={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},oe=Object.assign({},we,{firstChunkSize:4e4,gps:[1,2,3,4]});function Me(n){return Re.apply(this,arguments)}function Re(){return(Re=(0,u.A)(function*(n){let e=new R(oe);yield e.read(n);let t=yield e.parse();if(t&&t.gps){let{latitude:i,longitude:r}=t.gps;return{latitude:i,longitude:r}}})).apply(this,arguments)}const le=Object.assign({},we,{tiff:!1,ifd1:!0,mergeOutput:!1});function Le(n){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,u.A)(function*(n){let e=new R(le);yield e.read(n);let t=yield e.extractThumbnail();return t&&ie?ee.from(t):t})).apply(this,arguments)}function Fe(n){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,u.A)(function*(n){let e=yield this.thumbnail(n);if(void 0!==e){let t=new Blob([e]);return URL.createObjectURL(t)}})).apply(this,arguments)}const ue=Object.assign({},we,{firstChunkSize:4e4,ifd0:[274]});function he(n){return Be.apply(this,arguments)}function Be(){return(Be=(0,u.A)(function*(n){let e=new R(ue);yield e.read(n);let t=yield e.parse();if(t&&t.ifd0)return t.ifd0[274]})).apply(this,arguments)}const fe=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let G=!0,_=!0;if("object"==typeof navigator){let n=navigator.userAgent;if(n.includes("iPad")||n.includes("iPhone")){let e=n.match(/OS (\d+)_(\d+)/);if(e){let[,t,i]=e;G=Number(t)+.1*Number(i)<13.4,_=!1}}else if(n.includes("OS X 10")){let[,e]=n.match(/OS X 10[_.](\d+)/);G=_=Number(e)<15}if(n.includes("Chrome/")){let[,e]=n.match(/Chrome\/(\d+)/);G=_=Number(e)<81}else if(n.includes("Firefox/")){let[,e]=n.match(/Firefox\/(\d+)/);G=_=Number(e)<77}}function Ne(n){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,u.A)(function*(n){let e=yield he(n);return Object.assign({canvas:G,css:_},fe[e])})).apply(this,arguments)}class Bt extends P{constructor(...e){super(...e),f(this,"ranges",new Nt),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,i){if(0===e&&0===this.byteLength&&i){let r=new DataView(i.buffer||i,i.byteOffset,i.byteLength);this._swapDataView(r)}else{let r=e+t;if(r>this.byteLength){let{dataView:s}=this._extend(r);this._swapDataView(s)}}}_extend(e){let t;t=ie?ee.allocUnsafe(e):new Uint8Array(e);let i=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:i}}subarray(e,t,i=!1){return t=t||this._lengthToEnd(e),i&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,i=!1){i&&this._tryExtend(t,e.byteLength,e);let r=super.set(e,t);return this.ranges.add(t,r.byteLength),r}ensureChunk(e,t){var i=this;return(0,u.A)(function*(){i.chunked&&(i.ranges.available(e,t)||(yield i.readChunk(e,t)))})()}available(e,t){return this.ranges.available(e,t)}}class Nt{constructor(){f(this,"list",[])}get length(){return this.list.length}add(e,t,i=0){let r=e+t,s=this.list.filter(a=>at(e,a.offset,r)||at(e,a.end,r));if(s.length>0){e=Math.min(e,...s.map(o=>o.offset)),r=Math.max(r,...s.map(o=>o.end)),t=r-e;let a=s.shift();a.offset=e,a.length=t,a.end=r,this.list=this.list.filter(o=>!s.includes(o))}else this.list.push({offset:e,length:t,end:r})}available(e,t){let i=e+t;return this.list.some(r=>r.offset<=e&&i<=r.end)}}function at(n,e,t){return n<=e&&e<=t}class ce extends Bt{constructor(e,t){super(0),f(this,"chunksRead",0),this.input=e,this.options=t}readWhole(){var e=this;return(0,u.A)(function*(){e.chunked=!1,yield e.readChunk(e.nextChunkOffset)})()}readChunked(){var e=this;return(0,u.A)(function*(){e.chunked=!0,yield e.readChunk(0,e.options.firstChunkSize)})()}readNextChunk(){var e=this;return(0,u.A)(function*(t=e.nextChunkOffset){if(e.fullyRead)return e.chunksRead++,!1;let i=e.options.chunkSize,r=yield e.readChunk(t,i);return!!r&&r.byteLength===i}).apply(this,arguments)}readChunk(e,t){var i=this;return(0,u.A)(function*(){if(i.chunksRead++,0!==(t=i.safeWrapAddress(e,t)))return i._readChunk(e,t)})()}safeWrapAddress(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}k.set("blob",class extends ce{readWhole(){var n=this;return(0,u.A)(function*(){n.chunked=!1;let e=yield E(n.input);n._swapArrayBuffer(e)})()}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}_readChunk(n,e){var t=this;return(0,u.A)(function*(){let r=t.input.slice(n,e?n+e:void 0),s=yield E(r);return t.set(s,n,!0)})()}});var Gt=Object.freeze({__proto__:null,default:Et,Exifr:R,fileParsers:A,segmentParsers:p,fileReaders:k,tagKeys:C,tagValues:I,tagRevivers:v,createDictionary:y,extendDictionary:B,fetchUrlAsArrayBuffer:F,readBlobAsArrayBuffer:E,chunkedProps:x,otherSegments:z,segments:N,tiffBlocks:g,segmentsAndBlocks:D,tiffExtractables:O,inheritables:H,allFormatters:w,Options:M,parse:Y,gpsOnlyOptions:oe,gps:Me,thumbnailOnlyOptions:le,thumbnail:Le,thumbnailUrl:Fe,orientationOnlyOptions:ue,orientation:he,rotations:fe,get rotateCanvas(){return G},get rotateCss(){return _},rotation:Ne});k.set("url",class extends ce{readWhole(){var n=this;return(0,u.A)(function*(){n.chunked=!1;let e=yield F(n.input);e instanceof ArrayBuffer?n._swapArrayBuffer(e):e instanceof Uint8Array&&n._swapBuffer(e)})()}_readChunk(n,e){var t=this;return(0,u.A)(function*(){let i=e?n+e-1:void 0,r=t.options.httpHeaders||{};(n||i)&&(r.range=`bytes=${[n,i].join("-")}`);let s=yield Se(t.input,{headers:r}),a=yield s.arrayBuffer(),o=a.byteLength;if(416!==s.status)return o!==e&&(t.size=n+o),t.set(a,n,!0)})()}}),P.prototype.getUint64=function(n){let e=this.getUint32(n),t=this.getUint32(n+4);return e<1048575?e<<32|t:void 0!==typeof te?(console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),te(e)<<te(32)|te(t)):void m("Trying to read 64b value but JS can only handle 53b numbers.")};class _t extends ae{parseBoxes(e=0){let t=[];for(;e<this.file.byteLength-4;){let i=this.parseBoxHead(e);if(t.push(i),0===i.length)break;e+=i.length}return t}parseSubBoxes(e){e.boxes=this.parseBoxes(e.start)}findBox(e,t){return void 0===e.boxes&&this.parseSubBoxes(e),e.boxes.find(i=>i.kind===t)}parseBoxHead(e){let t=this.file.getUint32(e),i=this.file.getString(e+4,4),r=e+8;return 1===t&&(t=this.file.getUint64(e+8),r+=8),{offset:e,length:t,kind:i,start:r}}parseBoxFullHead(e){if(void 0!==e.version)return;let t=this.file.getUint32(e.start);e.version=t>>24,e.start+=4}}class ot extends _t{static canHandle(e,t){if(0!==t)return!1;let i=e.getUint16(2);if(i>50)return!1;let r=16,s=[];for(;r<i;)s.push(e.getString(r,4)),r+=4;return s.includes(this.type)}parse(){var e=this;return(0,u.A)(function*(){let t=e.file.getUint32(0),i=e.parseBoxHead(t);for(;"meta"!==i.kind;)t+=i.length,yield e.file.ensureChunk(t,16),i=e.parseBoxHead(t);yield e.file.ensureChunk(i.offset,i.length),e.parseBoxFullHead(i),e.parseSubBoxes(i),e.options.icc.enabled&&(yield e.findIcc(i)),e.options.tiff.enabled&&(yield e.findExif(i))})()}registerSegment(e,t,i){var r=this;return(0,u.A)(function*(){yield r.file.ensureChunk(t,i);let s=r.file.subarray(t,i);r.createParser(e,s)})()}findIcc(e){var t=this;return(0,u.A)(function*(){let i=t.findBox(e,"iprp");if(void 0===i)return;let r=t.findBox(i,"ipco");if(void 0===r)return;let s=t.findBox(r,"colr");void 0!==s&&(yield t.registerSegment("icc",s.offset+12,s.length))})()}findExif(e){var t=this;return(0,u.A)(function*(){let i=t.findBox(e,"iinf");if(void 0===i)return;let r=t.findBox(e,"iloc");if(void 0===r)return;let s=t.findExifLocIdInIinf(i),a=t.findExtentInIloc(r,s);if(void 0===a)return;let[o,l]=a;yield t.file.ensureChunk(o,l);let h=4+t.file.getUint32(o);o+=h,l-=h,yield t.registerSegment("tiff",o,l)})()}findExifLocIdInIinf(e){this.parseBoxFullHead(e);let t,i,r,s,a=e.start,o=this.file.getUint16(a);for(a+=2;o--;){if(t=this.parseBoxHead(a),this.parseBoxFullHead(t),i=t.start,t.version>=2&&(r=3===t.version?4:2,s=this.file.getString(i+r+2,4),"Exif"===s))return this.file.getUintBytes(i,r);a+=t.length}}get8bits(e){let t=this.file.getUint8(e);return[t>>4,15&t]}findExtentInIloc(e,t){this.parseBoxFullHead(e);let i=e.start,[r,s]=this.get8bits(i++),[a,o]=this.get8bits(i++),l=2===e.version?4:2,h=1===e.version||2===e.version?2:0,c=o+r+s,d=2===e.version?4:2,S=this.file.getUintBytes(i,d);for(i+=d;S--;){let U=this.file.getUintBytes(i,l);i+=l+h+2+a;let q=this.file.getUint16(i);if(i+=2,U===t)return q>1&&console.warn("ILOC box has more than one extent but we're only processing one\nPlease create an issue at https://github.com/MikeKovarik/exifr with this file"),[this.file.getUintBytes(i+o,r),this.file.getUintBytes(i+o+r,s)];i+=q*c}}}class lt extends ot{}f(lt,"type","heic");class ut extends ot{}f(ut,"type","avif"),A.set("heic",lt),A.set("avif",ut),y(C,["ifd0","ifd1"],[[256,"ImageWidth"],[257,"ImageHeight"],[258,"BitsPerSample"],[259,"Compression"],[262,"PhotometricInterpretation"],[270,"ImageDescription"],[271,"Make"],[272,"Model"],[273,"StripOffsets"],[274,"Orientation"],[277,"SamplesPerPixel"],[278,"RowsPerStrip"],[279,"StripByteCounts"],[282,"XResolution"],[283,"YResolution"],[284,"PlanarConfiguration"],[296,"ResolutionUnit"],[301,"TransferFunction"],[305,"Software"],[306,"ModifyDate"],[315,"Artist"],[316,"HostComputer"],[317,"Predictor"],[318,"WhitePoint"],[319,"PrimaryChromaticities"],[513,"ThumbnailOffset"],[514,"ThumbnailLength"],[529,"YCbCrCoefficients"],[530,"YCbCrSubSampling"],[531,"YCbCrPositioning"],[532,"ReferenceBlackWhite"],[700,"ApplicationNotes"],[33432,"Copyright"],[33723,"IPTC"],[34665,"ExifIFD"],[34675,"ICC"],[34853,"GpsIFD"],[330,"SubIFD"],[40965,"InteropIFD"],[40091,"XPTitle"],[40092,"XPComment"],[40093,"XPAuthor"],[40094,"XPKeywords"],[40095,"XPSubject"]]),y(C,"exif",[[33434,"ExposureTime"],[33437,"FNumber"],[34850,"ExposureProgram"],[34852,"SpectralSensitivity"],[34855,"ISO"],[34858,"TimeZoneOffset"],[34859,"SelfTimerMode"],[34864,"SensitivityType"],[34865,"StandardOutputSensitivity"],[34866,"RecommendedExposureIndex"],[34867,"ISOSpeed"],[34868,"ISOSpeedLatitudeyyy"],[34869,"ISOSpeedLatitudezzz"],[36864,"ExifVersion"],[36867,"DateTimeOriginal"],[36868,"CreateDate"],[36873,"GooglePlusUploadCode"],[36880,"OffsetTime"],[36881,"OffsetTimeOriginal"],[36882,"OffsetTimeDigitized"],[37121,"ComponentsConfiguration"],[37122,"CompressedBitsPerPixel"],[37377,"ShutterSpeedValue"],[37378,"ApertureValue"],[37379,"BrightnessValue"],[37380,"ExposureCompensation"],[37381,"MaxApertureValue"],[37382,"SubjectDistance"],[37383,"MeteringMode"],[37384,"LightSource"],[37385,"Flash"],[37386,"FocalLength"],[37393,"ImageNumber"],[37394,"SecurityClassification"],[37395,"ImageHistory"],[37396,"SubjectArea"],[37500,"MakerNote"],[37510,"UserComment"],[37520,"SubSecTime"],[37521,"SubSecTimeOriginal"],[37522,"SubSecTimeDigitized"],[37888,"AmbientTemperature"],[37889,"Humidity"],[37890,"Pressure"],[37891,"WaterDepth"],[37892,"Acceleration"],[37893,"CameraElevationAngle"],[40960,"FlashpixVersion"],[40961,"ColorSpace"],[40962,"ExifImageWidth"],[40963,"ExifImageHeight"],[40964,"RelatedSoundFile"],[41483,"FlashEnergy"],[41486,"FocalPlaneXResolution"],[41487,"FocalPlaneYResolution"],[41488,"FocalPlaneResolutionUnit"],[41492,"SubjectLocation"],[41493,"ExposureIndex"],[41495,"SensingMethod"],[41728,"FileSource"],[41729,"SceneType"],[41730,"CFAPattern"],[41985,"CustomRendered"],[41986,"ExposureMode"],[41987,"WhiteBalance"],[41988,"DigitalZoomRatio"],[41989,"FocalLengthIn35mmFormat"],[41990,"SceneCaptureType"],[41991,"GainControl"],[41992,"Contrast"],[41993,"Saturation"],[41994,"Sharpness"],[41996,"SubjectDistanceRange"],[42016,"ImageUniqueID"],[42032,"OwnerName"],[42033,"SerialNumber"],[42034,"LensInfo"],[42035,"LensMake"],[42036,"LensModel"],[42037,"LensSerialNumber"],[42080,"CompositeImage"],[42081,"CompositeImageCount"],[42082,"CompositeImageExposureTimes"],[42240,"Gamma"],[59932,"Padding"],[59933,"OffsetSchema"],[65e3,"OwnerName"],[65001,"SerialNumber"],[65002,"Lens"],[65100,"RawFile"],[65101,"Converter"],[65102,"WhiteBalance"],[65105,"Exposure"],[65106,"Shadows"],[65107,"Brightness"],[65108,"Contrast"],[65109,"Saturation"],[65110,"Sharpness"],[65111,"Smoothness"],[65112,"MoireFilter"],[40965,"InteropIFD"]]),y(C,"gps",[[0,"GPSVersionID"],[1,"GPSLatitudeRef"],[2,"GPSLatitude"],[3,"GPSLongitudeRef"],[4,"GPSLongitude"],[5,"GPSAltitudeRef"],[6,"GPSAltitude"],[7,"GPSTimeStamp"],[8,"GPSSatellites"],[9,"GPSStatus"],[10,"GPSMeasureMode"],[11,"GPSDOP"],[12,"GPSSpeedRef"],[13,"GPSSpeed"],[14,"GPSTrackRef"],[15,"GPSTrack"],[16,"GPSImgDirectionRef"],[17,"GPSImgDirection"],[18,"GPSMapDatum"],[19,"GPSDestLatitudeRef"],[20,"GPSDestLatitude"],[21,"GPSDestLongitudeRef"],[22,"GPSDestLongitude"],[23,"GPSDestBearingRef"],[24,"GPSDestBearing"],[25,"GPSDestDistanceRef"],[26,"GPSDestDistance"],[27,"GPSProcessingMethod"],[28,"GPSAreaInformation"],[29,"GPSDateStamp"],[30,"GPSDifferential"],[31,"GPSHPositioningError"]]),y(I,["ifd0","ifd1"],[[274,{1:"Horizontal (normal)",2:"Mirror horizontal",3:"Rotate 180",4:"Mirror vertical",5:"Mirror horizontal and rotate 270 CW",6:"Rotate 90 CW",7:"Mirror horizontal and rotate 90 CW",8:"Rotate 270 CW"}],[296,{1:"None",2:"inches",3:"cm"}]]);let $=y(I,"exif",[[34850,{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"}],[37121,{0:"-",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}],[37383,{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"}],[37384,{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"}],[37385,{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"}],[41495,{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"}],[41728,{1:"Film Scanner",2:"Reflection Print Scanner",3:"Digital Camera"}],[41729,{1:"Directly photographed"}],[41985,{0:"Normal",1:"Custom",2:"HDR (no original saved)",3:"HDR (original saved)",4:"Original (for HDR)",6:"Panorama",7:"Portrait HDR",8:"Portrait"}],[41986,{0:"Auto",1:"Manual",2:"Auto bracket"}],[41987,{0:"Auto",1:"Manual"}],[41990,{0:"Standard",1:"Landscape",2:"Portrait",3:"Night",4:"Other"}],[41991,{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"}],[41996,{0:"Unknown",1:"Macro",2:"Close",3:"Distant"}],[42080,{0:"Unknown",1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"}]]);const ht={1:"No absolute unit of measurement",2:"Inch",3:"Centimeter"};$.set(37392,ht),$.set(41488,ht);const _e={0:"Normal",1:"Low",2:"High"};function ft(n){return"object"==typeof n&&void 0!==n.length?n[0]:n}function ct(n){let e=Array.from(n).slice(1);return e[1]>15&&(e=e.map(t=>String.fromCharCode(t))),"0"!==e[2]&&0!==e[2]||e.pop(),e.join(".")}function Ve(n){if("string"==typeof n){var[e,t,i,r,s,a]=n.trim().split(/[-: ]/g).map(Number),o=new Date(e,t-1,i);return Number.isNaN(r)||Number.isNaN(s)||Number.isNaN(a)||(o.setHours(r),o.setMinutes(s),o.setSeconds(a)),Number.isNaN(+o)?n:o}}function J(n){if("string"==typeof n)return n;let e=[];if(0===n[1]&&0===n[n.length-1])for(let t=0;t<n.length;t+=2)e.push(dt(n[t+1],n[t]));else for(let t=0;t<n.length;t+=2)e.push(dt(n[t],n[t+1]));return V(String.fromCodePoint(...e))}function dt(n,e){return n<<8|e}$.set(41992,_e),$.set(41993,_e),$.set(41994,_e),y(v,["ifd0","ifd1"],[[50827,function(n){return"string"!=typeof n?Qe(n):n}],[306,Ve],[40091,J],[40092,J],[40093,J],[40094,J],[40095,J]]),y(v,"exif",[[40960,ct],[36864,ct],[36867,Ve],[36868,Ve],[40962,ft],[40963,ft]]),y(v,"gps",[[0,n=>Array.from(n).join(".")],[7,n=>Array.from(n).join(":")]]);class ze extends T{static canHandle(e,t){return 225===e.getUint8(t+1)&&1752462448===e.getUint32(t+4)&&"http://ns.adobe.com/"===e.getString(t+4,20)}static headerLength(e,t){return"http://ns.adobe.com/xmp/extension/"===e.getString(t+4,34)?79:33}static findPosition(e,t){let i=super.findPosition(e,t);return i.multiSegment=i.extended=79===i.headerLength,i.multiSegment?(i.chunkCount=e.getUint8(t+72),i.chunkNumber=e.getUint8(t+76),0!==e.getUint8(t+77)&&i.chunkNumber++):(i.chunkCount=1/0,i.chunkNumber=-1),i}static handleMultiSegments(e){return e.map(t=>t.chunk.getString()).join("")}normalizeInput(e){return"string"==typeof e?e:P.from(e).getString()}parse(e=this.chunk){if(!this.localOptions.parse)return e;e=function(s){let a={},o={};for(let l of yt)a[l]=[],o[l]=0;return s.replace(jt,(l,h,c)=>{if("<"===h){let d=++o[c];return a[c].push(d),`${l}#${d}`}return`${l}#${a[c].pop()}`})}(e);let t=j.findAll(e,"rdf","Description");0===t.length&&t.push(new j("rdf","Description",void 0,e));let i,r={};for(let s of t)for(let a of s.properties)i=Ht(a.ns,r),pt(a,i);return function(s){let a;for(let o in s)a=s[o]=re(s[o]),void 0===a&&delete s[o];return re(s)}(r)}assignToOutput(e,t){if(this.localOptions.parse)for(let[i,r]of Object.entries(t))switch(i){case"tiff":this.assignObjectToOutput(e,"ifd0",r);break;case"exif":this.assignObjectToOutput(e,"exif",r);break;case"xmlns":break;default:this.assignObjectToOutput(e,i,r)}else e.xmp=t}}f(ze,"type","xmp"),f(ze,"multiSegment",!0),p.set("xmp",ze);class de{static findAll(e){return gt(e,/([a-zA-Z0-9-]+):([a-zA-Z0-9-]+)=("[^"]*"|'[^']*')/gm).map(de.unpackMatch)}static unpackMatch(e){let t=e[1],i=e[2],r=e[3].slice(1,-1);return r=mt(r),new de(t,i,r)}constructor(e,t,i){this.ns=e,this.name=t,this.value=i}serialize(){return this.value}}class j{static findAll(e,t,i){if(void 0!==t||void 0!==i){t=t||"[\\w\\d-]+",i=i||"[\\w\\d-]+";var r=new RegExp(`<(${t}):(${i})(#\\d+)?((\\s+?[\\w\\d-:]+=("[^"]*"|'[^']*'))*\\s*)(\\/>|>([\\s\\S]*?)<\\/\\1:\\2\\3>)`,"gm")}else r=/<([\w\d-]+):([\w\d-]+)(#\d+)?((\s+?[\w\d-:]+=("[^"]*"|'[^']*'))*\s*)(\/>|>([\s\S]*?)<\/\1:\2\3>)/gm;return gt(e,r).map(j.unpackMatch)}static unpackMatch(e){return new j(e[1],e[2],e[4],e[8])}constructor(e,t,i,r){this.ns=e,this.name=t,this.attrString=i,this.innerXml=r,this.attrs=de.findAll(i),this.children=j.findAll(r),this.value=0===this.children.length?mt(r):void 0,this.properties=[...this.attrs,...this.children]}get isPrimitive(){return void 0!==this.value&&0===this.attrs.length&&0===this.children.length}get isListContainer(){return 1===this.children.length&&this.children[0].isList}get isList(){let{ns:e,name:t}=this;return"rdf"===e&&("Seq"===t||"Bag"===t||"Alt"===t)}get isListItem(){return"rdf"===this.ns&&"li"===this.name}serialize(){if(0===this.properties.length&&void 0===this.value)return;if(this.isPrimitive)return this.value;if(this.isListContainer)return this.children[0].serialize();if(this.isList)return zt(this.children.map(Vt));if(this.isListItem&&1===this.children.length&&0===this.attrs.length)return this.children[0].serialize();let e={};for(let t of this.properties)pt(t,e);return void 0!==this.value&&(e.value=this.value),re(e)}}function pt(n,e){let t=n.serialize();void 0!==t&&(e[n.name]=t)}var Vt=n=>n.serialize(),zt=n=>1===n.length?n[0]:n,Ht=(n,e)=>e[n]?e[n]:e[n]={};function gt(n,e){let t,i=[];if(!n)return i;for(;null!==(t=e.exec(n));)i.push(t);return i}function mt(n){if(null==(i=n)||"null"===i||"undefined"===i||""===i||""===i.trim())return;var i;let e=Number(n);if(!Number.isNaN(e))return e;let t=n.toLowerCase();return"true"===t||"false"!==t&&n.trim()}const yt=["rdf:li","rdf:Seq","rdf:Bag","rdf:Alt","rdf:Description"],jt=new RegExp(`(<|\\/)(${yt.join("|")})`,"g");var Wt=Object.freeze({__proto__:null,default:Gt,Exifr:R,fileParsers:A,segmentParsers:p,fileReaders:k,tagKeys:C,tagValues:I,tagRevivers:v,createDictionary:y,extendDictionary:B,fetchUrlAsArrayBuffer:F,readBlobAsArrayBuffer:E,chunkedProps:x,otherSegments:z,segments:N,tiffBlocks:g,segmentsAndBlocks:D,tiffExtractables:O,inheritables:H,allFormatters:w,Options:M,parse:Y,gpsOnlyOptions:oe,gps:Me,thumbnailOnlyOptions:le,thumbnail:Le,thumbnailUrl:Fe,orientationOnlyOptions:ue,orientation:he,rotations:fe,get rotateCanvas(){return G},get rotateCss(){return _},rotation:Ne});const He=["xmp","icc","iptc","tiff"],Kt=()=>{};function Xt(n,e,t){return je.apply(this,arguments)}function je(){return(je=(0,u.A)(function*(n,e,t){let i=new M(e);i.chunked=!1,void 0===t&&"string"==typeof n&&(t=function(s){let a=s.toLowerCase().split(".").pop();return function(o){return"exif"===o||"tiff"===o||"tif"===o}(a)?"tiff":He.includes(a)?a:void 0}(n));let r=yield Ze(n,i);if(t){if(He.includes(t))return We(t,r,i);m("Invalid segment type")}else{if(function(s){let a=s.getString(0,50).trim();return a.includes("<?xpacket")||a.includes("<x:")}(r))return We("xmp",r,i);for(let[s]of p){if(!He.includes(s))continue;let a=yield We(s,r,i).catch(Kt);if(a)return a}m("Unknown file format")}})).apply(this,arguments)}function We(n,e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,u.A)(function*(n,e,t){let i=t[n];return i.enabled=!0,i.parse=!0,p.get(n).parse(e,i)})).apply(this,arguments)}let St=ne("fs",n=>n.promises);k.set("fs",class extends ce{readWhole(){var n=this;return(0,u.A)(function*(){n.chunked=!1,n.fs=yield St;let e=yield n.fs.readFile(n.input);n._swapBuffer(e)})()}readChunked(){var n=this;return(0,u.A)(function*(){n.chunked=!0,n.fs=yield St,yield n.open(),yield n.readChunk(0,n.options.firstChunkSize)})()}open(){var n=this;return(0,u.A)(function*(){void 0===n.fh&&(n.fh=yield n.fs.open(n.input,"r"),n.size=(yield n.fh.stat(n.input)).size)})()}_readChunk(n,e){var t=this;return(0,u.A)(function*(){void 0===t.fh&&(yield t.open()),n+e>t.size&&(e=t.size-n);var i=t.subarray(n,e,!0);return yield t.fh.read(i.dataView,0,e,n),i})()}close(){var n=this;return(0,u.A)(function*(){if(n.fh){let e=n.fh;n.fh=void 0,yield e.close()}})()}}),k.set("base64",class extends ce{constructor(...n){super(...n),this.input=this.input.replace(/^data:([^;]+);base64,/gim,""),this.size=this.input.length/4*3,this.input.endsWith("==")?this.size-=2:this.input.endsWith("=")&&(this.size-=1)}_readChunk(n,e){var t=this;return(0,u.A)(function*(){let i,r,s=t.input;void 0===n?(n=0,i=0,r=0):(i=4*Math.floor(n/3),r=n-i/4*3),void 0===e&&(e=t.size);let o=i+4*Math.ceil((n+e)/3);s=s.slice(i,o);let l=Math.min(e,t.size-n);if(ie){let h=ee.from(s,"base64").slice(r,r+l);return t.set(h,n,!0)}{let h=t.subarray(n,l,!0),c=atob(s),d=h.toUint8();for(let S=0;S<l;S++)d[S]=c.charCodeAt(r+S);return h}})()}});class Ct extends ae{static canHandle(e,t){return 18761===t||19789===t}extendOptions(e){let{ifd0:t,xmp:i,iptc:r,icc:s}=e;i.enabled&&t.deps.add(700),r.enabled&&t.deps.add(33723),s.enabled&&t.deps.add(34675),t.finalizeFilters()}parse(){var e=this;return(0,u.A)(function*(){let{tiff:t,xmp:i,iptc:r,icc:s}=e.options;if(t.enabled||i.enabled||r.enabled||s.enabled){let a=Math.max(Ce(e.options),e.options.chunkSize);yield e.file.ensureChunk(0,a),e.createParser("tiff",e.file),e.parsers.tiff.parseHeader(),yield e.parsers.tiff.parseIfd0Block(),e.adaptTiffPropAsSegment("xmp"),e.adaptTiffPropAsSegment("iptc"),e.adaptTiffPropAsSegment("icc")}})()}adaptTiffPropAsSegment(e){this.parsers.tiff[e]&&this.injectSegment(e,this.parsers.tiff[e])}}f(Ct,"type","tiff"),A.set("tiff",Ct);let Yt=ne("zlib");const $t=["ihdr","iccp","text","itxt","exif"];class bt extends ae{constructor(...e){super(...e),f(this,"catchError",t=>this.errors.push(t)),f(this,"metaChunks",[]),f(this,"unknownChunks",[])}static canHandle(e,t){return 35152===t&&2303741511===e.getUint32(0)&&218765834===e.getUint32(4)}parse(){var e=this;return(0,u.A)(function*(){let{file:t}=e;yield e.findPngChunksInRange(8,t.byteLength),yield e.readSegments(e.metaChunks),e.findIhdr(),e.parseTextChunks(),yield e.findExif().catch(e.catchError),yield e.findXmp().catch(e.catchError),yield e.findIcc().catch(e.catchError)})()}findPngChunksInRange(e,t){var i=this;return(0,u.A)(function*(){let{file:r}=i;for(;e<t;){let s=r.getUint32(e),a=r.getUint32(e+4),o=r.getString(e+4,4).toLowerCase(),l=s+4+4+4,h={type:o,offset:e,length:l,start:e+4+4,size:s,marker:a};$t.includes(o)?i.metaChunks.push(h):i.unknownChunks.push(h),e+=l}})()}parseTextChunks(){let e=this.metaChunks.filter(t=>"text"===t.type);for(let t of e){let[i,r]=this.file.getString(t.start,t.size).split("\0");this.injectKeyValToIhdr(i,r)}}injectKeyValToIhdr(e,t){let i=this.parsers.ihdr;i&&i.raw.set(e,t)}findIhdr(){let e=this.metaChunks.find(t=>"ihdr"===t.type);e&&!1!==this.options.ihdr.enabled&&this.createParser("ihdr",e.chunk)}findExif(){var e=this;return(0,u.A)(function*(){let t=e.metaChunks.find(i=>"exif"===i.type);t&&e.injectSegment("tiff",t.chunk)})()}findXmp(){var e=this;return(0,u.A)(function*(){let t=e.metaChunks.filter(i=>"itxt"===i.type);for(let i of t)"XML:com.adobe.xmp"===i.chunk.getString(0,17)&&e.injectSegment("xmp",i.chunk)})()}findIcc(){var e=this;return(0,u.A)(function*(){let t=e.metaChunks.find(l=>"iccp"===l.type);if(!t)return;let{chunk:i}=t,r=i.getUint8Array(0,81),s=0;for(;s<80&&0!==r[s];)s++;let a=s+2,o=i.getString(0,s);if(e.injectKeyValToIhdr("ProfileName",o),Z){let l=yield Yt,h=i.getUint8Array(a);h=l.inflateSync(h),e.injectSegment("icc",h)}})()}}f(bt,"type","png"),A.set("png",bt),y(C,"interop",[[1,"InteropIndex"],[2,"InteropVersion"],[4096,"RelatedImageFileFormat"],[4097,"RelatedImageWidth"],[4098,"RelatedImageHeight"]]),B(C,"ifd0",[[11,"ProcessingSoftware"],[254,"SubfileType"],[255,"OldSubfileType"],[263,"Thresholding"],[264,"CellWidth"],[265,"CellLength"],[266,"FillOrder"],[269,"DocumentName"],[280,"MinSampleValue"],[281,"MaxSampleValue"],[285,"PageName"],[286,"XPosition"],[287,"YPosition"],[290,"GrayResponseUnit"],[297,"PageNumber"],[321,"HalftoneHints"],[322,"TileWidth"],[323,"TileLength"],[332,"InkSet"],[337,"TargetPrinter"],[18246,"Rating"],[18249,"RatingPercent"],[33550,"PixelScale"],[34264,"ModelTransform"],[34377,"PhotoshopSettings"],[50706,"DNGVersion"],[50707,"DNGBackwardVersion"],[50708,"UniqueCameraModel"],[50709,"LocalizedCameraModel"],[50736,"DNGLensInfo"],[50739,"ShadowScale"],[50740,"DNGPrivateData"],[33920,"IntergraphMatrix"],[33922,"ModelTiePoint"],[34118,"SEMInfo"],[34735,"GeoTiffDirectory"],[34736,"GeoTiffDoubleParams"],[34737,"GeoTiffAsciiParams"],[50341,"PrintIM"],[50721,"ColorMatrix1"],[50722,"ColorMatrix2"],[50723,"CameraCalibration1"],[50724,"CameraCalibration2"],[50725,"ReductionMatrix1"],[50726,"ReductionMatrix2"],[50727,"AnalogBalance"],[50728,"AsShotNeutral"],[50729,"AsShotWhiteXY"],[50730,"BaselineExposure"],[50731,"BaselineNoise"],[50732,"BaselineSharpness"],[50734,"LinearResponseLimit"],[50735,"CameraSerialNumber"],[50741,"MakerNoteSafety"],[50778,"CalibrationIlluminant1"],[50779,"CalibrationIlluminant2"],[50781,"RawDataUniqueID"],[50827,"OriginalRawFileName"],[50828,"OriginalRawFileData"],[50831,"AsShotICCProfile"],[50832,"AsShotPreProfileMatrix"],[50833,"CurrentICCProfile"],[50834,"CurrentPreProfileMatrix"],[50879,"ColorimetricReference"],[50885,"SRawType"],[50898,"PanasonicTitle"],[50899,"PanasonicTitle2"],[50931,"CameraCalibrationSig"],[50932,"ProfileCalibrationSig"],[50933,"ProfileIFD"],[50934,"AsShotProfileName"],[50936,"ProfileName"],[50937,"ProfileHueSatMapDims"],[50938,"ProfileHueSatMapData1"],[50939,"ProfileHueSatMapData2"],[50940,"ProfileToneCurve"],[50941,"ProfileEmbedPolicy"],[50942,"ProfileCopyright"],[50964,"ForwardMatrix1"],[50965,"ForwardMatrix2"],[50966,"PreviewApplicationName"],[50967,"PreviewApplicationVersion"],[50968,"PreviewSettingsName"],[50969,"PreviewSettingsDigest"],[50970,"PreviewColorSpace"],[50971,"PreviewDateTime"],[50972,"RawImageDigest"],[50973,"OriginalRawFileDigest"],[50981,"ProfileLookTableDims"],[50982,"ProfileLookTableData"],[51043,"TimeCodes"],[51044,"FrameRate"],[51058,"TStop"],[51081,"ReelName"],[51089,"OriginalDefaultFinalSize"],[51090,"OriginalBestQualitySize"],[51091,"OriginalDefaultCropSize"],[51105,"CameraLabel"],[51107,"ProfileHueSatMapEncoding"],[51108,"ProfileLookTableEncoding"],[51109,"BaselineExposureOffset"],[51110,"DefaultBlackRender"],[51111,"NewRawImageDigest"],[51112,"RawToPreviewGain"]]);let Pt=[[273,"StripOffsets"],[279,"StripByteCounts"],[288,"FreeOffsets"],[289,"FreeByteCounts"],[291,"GrayResponseCurve"],[292,"T4Options"],[293,"T6Options"],[300,"ColorResponseUnit"],[320,"ColorMap"],[324,"TileOffsets"],[325,"TileByteCounts"],[326,"BadFaxLines"],[327,"CleanFaxData"],[328,"ConsecutiveBadFaxLines"],[330,"SubIFD"],[333,"InkNames"],[334,"NumberofInks"],[336,"DotRange"],[338,"ExtraSamples"],[339,"SampleFormat"],[340,"SMinSampleValue"],[341,"SMaxSampleValue"],[342,"TransferRange"],[343,"ClipPath"],[344,"XClipPathUnits"],[345,"YClipPathUnits"],[346,"Indexed"],[347,"JPEGTables"],[351,"OPIProxy"],[400,"GlobalParametersIFD"],[401,"ProfileType"],[402,"FaxProfile"],[403,"CodingMethods"],[404,"VersionYear"],[405,"ModeNumber"],[433,"Decode"],[434,"DefaultImageColor"],[435,"T82Options"],[437,"JPEGTables"],[512,"JPEGProc"],[515,"JPEGRestartInterval"],[517,"JPEGLosslessPredictors"],[518,"JPEGPointTransforms"],[519,"JPEGQTables"],[520,"JPEGDCTables"],[521,"JPEGACTables"],[559,"StripRowCounts"],[999,"USPTOMiscellaneous"],[18247,"XP_DIP_XML"],[18248,"StitchInfo"],[28672,"SonyRawFileType"],[28688,"SonyToneCurve"],[28721,"VignettingCorrection"],[28722,"VignettingCorrParams"],[28724,"ChromaticAberrationCorrection"],[28725,"ChromaticAberrationCorrParams"],[28726,"DistortionCorrection"],[28727,"DistortionCorrParams"],[29895,"SonyCropTopLeft"],[29896,"SonyCropSize"],[32781,"ImageID"],[32931,"WangTag1"],[32932,"WangAnnotation"],[32933,"WangTag3"],[32934,"WangTag4"],[32953,"ImageReferencePoints"],[32954,"RegionXformTackPoint"],[32955,"WarpQuadrilateral"],[32956,"AffineTransformMat"],[32995,"Matteing"],[32996,"DataType"],[32997,"ImageDepth"],[32998,"TileDepth"],[33300,"ImageFullWidth"],[33301,"ImageFullHeight"],[33302,"TextureFormat"],[33303,"WrapModes"],[33304,"FovCot"],[33305,"MatrixWorldToScreen"],[33306,"MatrixWorldToCamera"],[33405,"Model2"],[33421,"CFARepeatPatternDim"],[33422,"CFAPattern2"],[33423,"BatteryLevel"],[33424,"KodakIFD"],[33445,"MDFileTag"],[33446,"MDScalePixel"],[33447,"MDColorTable"],[33448,"MDLabName"],[33449,"MDSampleInfo"],[33450,"MDPrepDate"],[33451,"MDPrepTime"],[33452,"MDFileUnits"],[33589,"AdventScale"],[33590,"AdventRevision"],[33628,"UIC1Tag"],[33629,"UIC2Tag"],[33630,"UIC3Tag"],[33631,"UIC4Tag"],[33918,"IntergraphPacketData"],[33919,"IntergraphFlagRegisters"],[33921,"INGRReserved"],[34016,"Site"],[34017,"ColorSequence"],[34018,"IT8Header"],[34019,"RasterPadding"],[34020,"BitsPerRunLength"],[34021,"BitsPerExtendedRunLength"],[34022,"ColorTable"],[34023,"ImageColorIndicator"],[34024,"BackgroundColorIndicator"],[34025,"ImageColorValue"],[34026,"BackgroundColorValue"],[34027,"PixelIntensityRange"],[34028,"TransparencyIndicator"],[34029,"ColorCharacterization"],[34030,"HCUsage"],[34031,"TrapIndicator"],[34032,"CMYKEquivalent"],[34152,"AFCP_IPTC"],[34232,"PixelMagicJBIGOptions"],[34263,"JPLCartoIFD"],[34306,"WB_GRGBLevels"],[34310,"LeafData"],[34687,"TIFF_FXExtensions"],[34688,"MultiProfiles"],[34689,"SharedData"],[34690,"T88Options"],[34732,"ImageLayer"],[34750,"JBIGOptions"],[34856,"Opto-ElectricConvFactor"],[34857,"Interlace"],[34908,"FaxRecvParams"],[34909,"FaxSubAddress"],[34910,"FaxRecvTime"],[34929,"FedexEDR"],[34954,"LeafSubIFD"],[37387,"FlashEnergy"],[37388,"SpatialFrequencyResponse"],[37389,"Noise"],[37390,"FocalPlaneXResolution"],[37391,"FocalPlaneYResolution"],[37392,"FocalPlaneResolutionUnit"],[37397,"ExposureIndex"],[37398,"TIFF-EPStandardID"],[37399,"SensingMethod"],[37434,"CIP3DataFile"],[37435,"CIP3Sheet"],[37436,"CIP3Side"],[37439,"StoNits"],[37679,"MSDocumentText"],[37680,"MSPropertySetStorage"],[37681,"MSDocumentTextPosition"],[37724,"ImageSourceData"],[40965,"InteropIFD"],[40976,"SamsungRawPointersOffset"],[40977,"SamsungRawPointersLength"],[41217,"SamsungRawByteOrder"],[41218,"SamsungRawUnknown"],[41484,"SpatialFrequencyResponse"],[41485,"Noise"],[41489,"ImageNumber"],[41490,"SecurityClassification"],[41491,"ImageHistory"],[41494,"TIFF-EPStandardID"],[41995,"DeviceSettingDescription"],[42112,"GDALMetadata"],[42113,"GDALNoData"],[44992,"ExpandSoftware"],[44993,"ExpandLens"],[44994,"ExpandFilm"],[44995,"ExpandFilterLens"],[44996,"ExpandScanner"],[44997,"ExpandFlashLamp"],[46275,"HasselbladRawImage"],[48129,"PixelFormat"],[48130,"Transformation"],[48131,"Uncompressed"],[48132,"ImageType"],[48256,"ImageWidth"],[48257,"ImageHeight"],[48258,"WidthResolution"],[48259,"HeightResolution"],[48320,"ImageOffset"],[48321,"ImageByteCount"],[48322,"AlphaOffset"],[48323,"AlphaByteCount"],[48324,"ImageDataDiscard"],[48325,"AlphaDataDiscard"],[50215,"OceScanjobDesc"],[50216,"OceApplicationSelector"],[50217,"OceIDNumber"],[50218,"OceImageLogic"],[50255,"Annotations"],[50459,"HasselbladExif"],[50547,"OriginalFileName"],[50560,"USPTOOriginalContentType"],[50656,"CR2CFAPattern"],[50710,"CFAPlaneColor"],[50711,"CFALayout"],[50712,"LinearizationTable"],[50713,"BlackLevelRepeatDim"],[50714,"BlackLevel"],[50715,"BlackLevelDeltaH"],[50716,"BlackLevelDeltaV"],[50717,"WhiteLevel"],[50718,"DefaultScale"],[50719,"DefaultCropOrigin"],[50720,"DefaultCropSize"],[50733,"BayerGreenSplit"],[50737,"ChromaBlurRadius"],[50738,"AntiAliasStrength"],[50752,"RawImageSegmentation"],[50780,"BestQualityScale"],[50784,"AliasLayerMetadata"],[50829,"ActiveArea"],[50830,"MaskedAreas"],[50935,"NoiseReductionApplied"],[50974,"SubTileBlockSize"],[50975,"RowInterleaveFactor"],[51008,"OpcodeList1"],[51009,"OpcodeList2"],[51022,"OpcodeList3"],[51041,"NoiseProfile"],[51114,"CacheVersion"],[51125,"DefaultUserCrop"],[51157,"NikonNEFInfo"],[65024,"KdcIFD"]];B(C,"ifd0",Pt),B(C,"exif",Pt),y(I,"gps",[[23,{M:"Magnetic North",T:"True North"}],[25,{K:"Kilometers",M:"Miles",N:"Nautical Miles"}]]);class Xe extends T{static canHandle(e,t){return 224===e.getUint8(t+1)&&1246120262===e.getUint32(t+4)&&0===e.getUint8(t+8)}parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint16(0)],[2,this.chunk.getUint8(2)],[3,this.chunk.getUint16(3)],[5,this.chunk.getUint16(5)],[7,this.chunk.getUint8(7)],[8,this.chunk.getUint8(8)]])}}f(Xe,"type","jfif"),f(Xe,"headerLength",9),p.set("jfif",Xe),y(C,"jfif",[[0,"JFIFVersion"],[2,"ResolutionUnit"],[3,"XResolution"],[5,"YResolution"],[7,"ThumbnailWidth"],[8,"ThumbnailHeight"]]);class It extends T{parse(){return this.parseTags(),this.translate(),this.output}parseTags(){this.raw=new Map([[0,this.chunk.getUint32(0)],[4,this.chunk.getUint32(4)],[8,this.chunk.getUint8(8)],[9,this.chunk.getUint8(9)],[10,this.chunk.getUint8(10)],[11,this.chunk.getUint8(11)],[12,this.chunk.getUint8(12)],...Array.from(this.raw)])}}f(It,"type","ihdr"),p.set("ihdr",It),y(C,"ihdr",[[0,"ImageWidth"],[4,"ImageHeight"],[8,"BitDepth"],[9,"ColorType"],[10,"Compression"],[11,"Filter"],[12,"Interlace"]]),y(I,"ihdr",[[9,{0:"Grayscale",2:"RGB",3:"Palette",4:"Grayscale with Alpha",6:"RGB with Alpha",DEFAULT:"Unknown"}],[10,{0:"Deflate/Inflate",DEFAULT:"Unknown"}],[11,{0:"Adaptive",DEFAULT:"Unknown"}],[12,{0:"Noninterlaced",1:"Adam7 Interlace",DEFAULT:"Unknown"}]]);class pe extends T{static canHandle(e,t){return 226===e.getUint8(t+1)&&1229144927===e.getUint32(t+4)}static findPosition(e,t){let i=super.findPosition(e,t);return i.chunkNumber=e.getUint8(t+16),i.chunkCount=e.getUint8(t+17),i.multiSegment=i.chunkCount>1,i}static handleMultiSegments(e){return function(t){let i=function(r){let s=r[0].constructor,a=0;for(let h of r)a+=h.length;let o=new s(a),l=0;for(let h of r)o.set(h,l),l+=h.length;return o}(t.map(r=>r.chunk.toUint8()));return new P(i)}(e)}parse(){return this.raw=new Map,this.parseHeader(),this.parseTags(),this.translate(),this.output}parseHeader(){let{raw:e}=this;this.chunk.byteLength<84&&m("ICC header is too short");for(let[t,i]of Object.entries(Jt)){t=parseInt(t,10);let r=i(this.chunk,t);"\0\0\0\0"!==r&&e.set(t,r)}}parseTags(){let e,t,i,r,s,{raw:a}=this,o=this.chunk.getUint32(128),l=132,h=this.chunk.byteLength;for(;o--;){if(e=this.chunk.getString(l,4),t=this.chunk.getUint32(l+4),i=this.chunk.getUint32(l+8),r=this.chunk.getString(t,4),t+i>h)return void console.warn("reached the end of the first ICC chunk. Enable options.tiff.multiSegment to read all ICC segments.");s=this.parseTag(r,t,i),void 0!==s&&"\0\0\0\0"!==s&&a.set(e,s),l+=12}}parseTag(e,t,i){switch(e){case"desc":return this.parseDesc(t);case"mluc":return this.parseMluc(t);case"text":return this.parseText(t,i);case"sig ":return this.parseSig(t)}if(!(t+i>this.chunk.byteLength))return this.chunk.getUint8Array(t,i)}parseDesc(e){let t=this.chunk.getUint32(e+8)-1;return V(this.chunk.getString(e+12,t))}parseText(e,t){return V(this.chunk.getString(e+8,t-8))}parseSig(e){return V(this.chunk.getString(e+8,4))}parseMluc(e){let{chunk:t}=this,i=t.getUint32(e+8),r=t.getUint32(e+12),s=e+16,a=[];for(let o=0;o<i;o++){let l=t.getString(s+0,2),h=t.getString(s+2,2),c=t.getUint32(s+4),d=t.getUint32(s+8)+e,S=V(t.getUnicodeString(d,c));a.push({lang:l,country:h,text:S}),s+=r}return 1===i?a[0].text:a}translateValue(e,t){return"string"==typeof e?t[e]||t[e.toLowerCase()]||e:t[e]||e}}f(pe,"type","icc"),f(pe,"multiSegment",!0),f(pe,"headerLength",18);const Jt={4:L,8:function(n,e){return[n.getUint8(e),n.getUint8(e+1)>>4,n.getUint8(e+1)%16].map(t=>t.toString(10)).join(".")},12:L,16:L,20:L,24:function(n,e){const t=n.getUint16(e),i=n.getUint16(e+2)-1,r=n.getUint16(e+4),s=n.getUint16(e+6),a=n.getUint16(e+8),o=n.getUint16(e+10);return new Date(Date.UTC(t,i,r,s,a,o))},36:L,40:L,48:L,52:L,64:(n,e)=>n.getUint32(e),80:L};function L(n,e){return V(n.getString(e,4))}p.set("icc",pe),y(C,"icc",[[4,"ProfileCMMType"],[8,"ProfileVersion"],[12,"ProfileClass"],[16,"ColorSpaceData"],[20,"ProfileConnectionSpace"],[24,"ProfileDateTime"],[36,"ProfileFileSignature"],[40,"PrimaryPlatform"],[44,"CMMFlags"],[48,"DeviceManufacturer"],[52,"DeviceModel"],[56,"DeviceAttributes"],[64,"RenderingIntent"],[68,"ConnectionSpaceIlluminant"],[80,"ProfileCreator"],[84,"ProfileID"],["Header","ProfileHeader"],["MS00","WCSProfiles"],["bTRC","BlueTRC"],["bXYZ","BlueMatrixColumn"],["bfd","UCRBG"],["bkpt","MediaBlackPoint"],["calt","CalibrationDateTime"],["chad","ChromaticAdaptation"],["chrm","Chromaticity"],["ciis","ColorimetricIntentImageState"],["clot","ColorantTableOut"],["clro","ColorantOrder"],["clrt","ColorantTable"],["cprt","ProfileCopyright"],["crdi","CRDInfo"],["desc","ProfileDescription"],["devs","DeviceSettings"],["dmdd","DeviceModelDesc"],["dmnd","DeviceMfgDesc"],["dscm","ProfileDescriptionML"],["fpce","FocalPlaneColorimetryEstimates"],["gTRC","GreenTRC"],["gXYZ","GreenMatrixColumn"],["gamt","Gamut"],["kTRC","GrayTRC"],["lumi","Luminance"],["meas","Measurement"],["meta","Metadata"],["mmod","MakeAndModel"],["ncl2","NamedColor2"],["ncol","NamedColor"],["ndin","NativeDisplayInfo"],["pre0","Preview0"],["pre1","Preview1"],["pre2","Preview2"],["ps2i","PS2RenderingIntent"],["ps2s","PostScript2CSA"],["psd0","PostScript2CRD0"],["psd1","PostScript2CRD1"],["psd2","PostScript2CRD2"],["psd3","PostScript2CRD3"],["pseq","ProfileSequenceDesc"],["psid","ProfileSequenceIdentifier"],["psvm","PS2CRDVMSize"],["rTRC","RedTRC"],["rXYZ","RedMatrixColumn"],["resp","OutputResponse"],["rhoc","ReflectionHardcopyOrigColorimetry"],["rig0","PerceptualRenderingIntentGamut"],["rig2","SaturationRenderingIntentGamut"],["rpoc","ReflectionPrintOutputColorimetry"],["sape","SceneAppearanceEstimates"],["scoe","SceneColorimetryEstimates"],["scrd","ScreeningDesc"],["scrn","Screening"],["targ","CharTarget"],["tech","Technology"],["vcgt","VideoCardGamma"],["view","ViewingConditions"],["vued","ViewingCondDesc"],["wtpt","MediaWhitePoint"]]);const ge={"4d2p":"Erdt Systems",AAMA:"Aamazing Technologies",ACER:"Acer",ACLT:"Acolyte Color Research",ACTI:"Actix Sytems",ADAR:"Adara Technology",ADBE:"Adobe",ADI:"ADI Systems",AGFA:"Agfa Graphics",ALMD:"Alps Electric",ALPS:"Alps Electric",ALWN:"Alwan Color Expertise",AMTI:"Amiable Technologies",AOC:"AOC International",APAG:"Apago",APPL:"Apple Computer",AST:"AST","AT&T":"AT&T",BAEL:"BARBIERI electronic",BRCO:"Barco NV",BRKP:"Breakpoint",BROT:"Brother",BULL:"Bull",BUS:"Bus Computer Systems","C-IT":"C-Itoh",CAMR:"Intel",CANO:"Canon",CARR:"Carroll Touch",CASI:"Casio",CBUS:"Colorbus PL",CEL:"Crossfield",CELx:"Crossfield",CGS:"CGS Publishing Technologies International",CHM:"Rochester Robotics",CIGL:"Colour Imaging Group, London",CITI:"Citizen",CL00:"Candela",CLIQ:"Color IQ",CMCO:"Chromaco",CMiX:"CHROMiX",COLO:"Colorgraphic Communications",COMP:"Compaq",COMp:"Compeq/Focus Technology",CONR:"Conrac Display Products",CORD:"Cordata Technologies",CPQ:"Compaq",CPRO:"ColorPro",CRN:"Cornerstone",CTX:"CTX International",CVIS:"ColorVision",CWC:"Fujitsu Laboratories",DARI:"Darius Technology",DATA:"Dataproducts",DCP:"Dry Creek Photo",DCRC:"Digital Contents Resource Center, Chung-Ang University",DELL:"Dell Computer",DIC:"Dainippon Ink and Chemicals",DICO:"Diconix",DIGI:"Digital","DL&C":"Digital Light & Color",DPLG:"Doppelganger",DS:"Dainippon Screen",DSOL:"DOOSOL",DUPN:"DuPont",EPSO:"Epson",ESKO:"Esko-Graphics",ETRI:"Electronics and Telecommunications Research Institute",EVER:"Everex Systems",EXAC:"ExactCODE",Eizo:"Eizo",FALC:"Falco Data Products",FF:"Fuji Photo Film",FFEI:"FujiFilm Electronic Imaging",FNRD:"Fnord Software",FORA:"Fora",FORE:"Forefront Technology",FP:"Fujitsu",FPA:"WayTech Development",FUJI:"Fujitsu",FX:"Fuji Xerox",GCC:"GCC Technologies",GGSL:"Global Graphics Software",GMB:"Gretagmacbeth",GMG:"GMG",GOLD:"GoldStar Technology",GOOG:"Google",GPRT:"Giantprint",GTMB:"Gretagmacbeth",GVC:"WayTech Development",GW2K:"Sony",HCI:"HCI",HDM:"Heidelberger Druckmaschinen",HERM:"Hermes",HITA:"Hitachi America",HP:"Hewlett-Packard",HTC:"Hitachi",HiTi:"HiTi Digital",IBM:"IBM",IDNT:"Scitex",IEC:"Hewlett-Packard",IIYA:"Iiyama North America",IKEG:"Ikegami Electronics",IMAG:"Image Systems",IMI:"Ingram Micro",INTC:"Intel",INTL:"N/A (INTL)",INTR:"Intra Electronics",IOCO:"Iocomm International Technology",IPS:"InfoPrint Solutions Company",IRIS:"Scitex",ISL:"Ichikawa Soft Laboratory",ITNL:"N/A (ITNL)",IVM:"IVM",IWAT:"Iwatsu Electric",Idnt:"Scitex",Inca:"Inca Digital Printers",Iris:"Scitex",JPEG:"Joint Photographic Experts Group",JSFT:"Jetsoft Development",JVC:"JVC Information Products",KART:"Scitex",KFC:"KFC Computek Components",KLH:"KLH Computers",KMHD:"Konica Minolta",KNCA:"Konica",KODA:"Kodak",KYOC:"Kyocera",Kart:"Scitex",LCAG:"Leica",LCCD:"Leeds Colour",LDAK:"Left Dakota",LEAD:"Leading Technology",LEXM:"Lexmark International",LINK:"Link Computer",LINO:"Linotronic",LITE:"Lite-On",Leaf:"Leaf",Lino:"Linotronic",MAGC:"Mag Computronic",MAGI:"MAG Innovision",MANN:"Mannesmann",MICN:"Micron Technology",MICR:"Microtek",MICV:"Microvitec",MINO:"Minolta",MITS:"Mitsubishi Electronics America",MITs:"Mitsuba",MNLT:"Minolta",MODG:"Modgraph",MONI:"Monitronix",MONS:"Monaco Systems",MORS:"Morse Technology",MOTI:"Motive Systems",MSFT:"Microsoft",MUTO:"MUTOH INDUSTRIES",Mits:"Mitsubishi Electric",NANA:"NANAO",NEC:"NEC",NEXP:"NexPress Solutions",NISS:"Nissei Sangyo America",NKON:"Nikon",NONE:"none",OCE:"Oce Technologies",OCEC:"OceColor",OKI:"Oki",OKID:"Okidata",OKIP:"Okidata",OLIV:"Olivetti",OLYM:"Olympus",ONYX:"Onyx Graphics",OPTI:"Optiquest",PACK:"Packard Bell",PANA:"Matsushita Electric Industrial",PANT:"Pantone",PBN:"Packard Bell",PFU:"PFU",PHIL:"Philips Consumer Electronics",PNTX:"HOYA",POne:"Phase One A/S",PREM:"Premier Computer Innovations",PRIN:"Princeton Graphic Systems",PRIP:"Princeton Publishing Labs",QLUX:"Hong Kong",QMS:"QMS",QPCD:"QPcard AB",QUAD:"QuadLaser",QUME:"Qume",RADI:"Radius",RDDx:"Integrated Color Solutions",RDG:"Roland DG",REDM:"REDMS Group",RELI:"Relisys",RGMS:"Rolf Gierling Multitools",RICO:"Ricoh",RNLD:"Edmund Ronald",ROYA:"Royal",RPC:"Ricoh Printing Systems",RTL:"Royal Information Electronics",SAMP:"Sampo",SAMS:"Samsung",SANT:"Jaime Santana Pomares",SCIT:"Scitex",SCRN:"Dainippon Screen",SDP:"Scitex",SEC:"Samsung",SEIK:"Seiko Instruments",SEIk:"Seikosha",SGUY:"ScanGuy.com",SHAR:"Sharp Laboratories",SICC:"International Color Consortium",SONY:"Sony",SPCL:"SpectraCal",STAR:"Star",STC:"Sampo Technology",Scit:"Scitex",Sdp:"Scitex",Sony:"Sony",TALO:"Talon Technology",TAND:"Tandy",TATU:"Tatung",TAXA:"TAXAN America",TDS:"Tokyo Denshi Sekei",TECO:"TECO Information Systems",TEGR:"Tegra",TEKT:"Tektronix",TI:"Texas Instruments",TMKR:"TypeMaker",TOSB:"Toshiba",TOSH:"Toshiba",TOTK:"TOTOKU ELECTRIC",TRIU:"Triumph",TSBT:"Toshiba",TTX:"TTX Computer Products",TVM:"TVM Professional Monitor",TW:"TW Casper",ULSX:"Ulead Systems",UNIS:"Unisys",UTZF:"Utz Fehlau & Sohn",VARI:"Varityper",VIEW:"Viewsonic",VISL:"Visual communication",VIVO:"Vivo Mobile Communication",WANG:"Wang",WLBR:"Wilbur Imaging",WTG2:"Ware To Go",WYSE:"WYSE Technology",XERX:"Xerox",XRIT:"X-Rite",ZRAN:"Zoran",Zebr:"Zebra Technologies",appl:"Apple Computer",bICC:"basICColor",berg:"bergdesign",ceyd:"Integrated Color Solutions",clsp:"MacDermid ColorSpan",ds:"Dainippon Screen",dupn:"DuPont",ffei:"FujiFilm Electronic Imaging",flux:"FluxData",iris:"Scitex",kart:"Scitex",lcms:"Little CMS",lino:"Linotronic",none:"none",ob4d:"Erdt Systems",obic:"Medigraph",quby:"Qubyx Sarl",scit:"Scitex",scrn:"Dainippon Screen",sdp:"Scitex",siwi:"SIWI GRAFIKA",yxym:"YxyMaster"},At={scnr:"Scanner",mntr:"Monitor",prtr:"Printer",link:"Device Link",abst:"Abstract",spac:"Color Space Conversion Profile",nmcl:"Named Color",cenc:"ColorEncodingSpace profile",mid:"MultiplexIdentification profile",mlnk:"MultiplexLink profile",mvis:"MultiplexVisualization profile",nkpf:"Nikon Input Device Profile (NON-STANDARD!)"};y(I,"icc",[[4,ge],[12,At],[40,Object.assign({},ge,At)],[48,ge],[80,ge],[64,{0:"Perceptual",1:"Relative Colorimetric",2:"Saturation",3:"Absolute Colorimetric"}],["tech",{amd:"Active Matrix Display",crt:"Cathode Ray Tube Display",kpcd:"Photo CD",pmd:"Passive Matrix Display",dcam:"Digital Camera",dcpj:"Digital Cinema Projector",dmpc:"Digital Motion Picture Camera",dsub:"Dye Sublimation Printer",epho:"Electrophotographic Printer",esta:"Electrostatic Printer",flex:"Flexography",fprn:"Film Writer",fscn:"Film Scanner",grav:"Gravure",ijet:"Ink Jet Printer",imgs:"Photo Image Setter",mpfr:"Motion Picture Film Recorder",mpfs:"Motion Picture Film Scanner",offs:"Offset Lithography",pjtv:"Projection Television",rpho:"Photographic Paper Printer",rscn:"Reflective Scanner",silk:"Silkscreen",twax:"Thermal Wax Printer",vidc:"Video Camera",vidm:"Video Monitor"}]]);class me extends T{static canHandle(e,t,i){return 237===e.getUint8(t+1)&&"Photoshop"===e.getString(t+4,9)&&void 0!==this.containsIptc8bim(e,t,i)}static headerLength(e,t,i){let r,s=this.containsIptc8bim(e,t,i);if(void 0!==s)return r=e.getUint8(t+s+7),r%2!=0&&(r+=1),0===r&&(r=4),s+8+r}static containsIptc8bim(e,t,i){for(let r=0;r<i;r++)if(this.isIptcSegmentHead(e,t+r))return r}static isIptcSegmentHead(e,t){return 56===e.getUint8(t)&&943868237===e.getUint32(t)&&1028===e.getUint16(t+4)}parse(){let{raw:e}=this,t=this.chunk.byteLength-1,i=!1;for(let r=0;r<t;r++)if(28===this.chunk.getUint8(r)&&2===this.chunk.getUint8(r+1)){i=!0;let s=this.chunk.getUint16(r+3),a=this.chunk.getUint8(r+2),o=this.chunk.getLatin1String(r+5,s);e.set(a,this.pluralizeValue(e.get(a),o)),r+=4+s}else if(i)break;return this.translate(),this.output}pluralizeValue(e,t){return void 0!==e?e instanceof Array?(e.push(t),e):[e,t]:t}}f(me,"type","iptc"),f(me,"translateValues",!1),f(me,"reviveValues",!1),p.set("iptc",me),y(C,"iptc",[[0,"ApplicationRecordVersion"],[3,"ObjectTypeReference"],[4,"ObjectAttributeReference"],[5,"ObjectName"],[7,"EditStatus"],[8,"EditorialUpdate"],[10,"Urgency"],[12,"SubjectReference"],[15,"Category"],[20,"SupplementalCategories"],[22,"FixtureIdentifier"],[25,"Keywords"],[26,"ContentLocationCode"],[27,"ContentLocationName"],[30,"ReleaseDate"],[35,"ReleaseTime"],[37,"ExpirationDate"],[38,"ExpirationTime"],[40,"SpecialInstructions"],[42,"ActionAdvised"],[45,"ReferenceService"],[47,"ReferenceDate"],[50,"ReferenceNumber"],[55,"DateCreated"],[60,"TimeCreated"],[62,"DigitalCreationDate"],[63,"DigitalCreationTime"],[65,"OriginatingProgram"],[70,"ProgramVersion"],[75,"ObjectCycle"],[80,"Byline"],[85,"BylineTitle"],[90,"City"],[92,"Sublocation"],[95,"State"],[100,"CountryCode"],[101,"Country"],[103,"OriginalTransmissionReference"],[105,"Headline"],[110,"Credit"],[115,"Source"],[116,"CopyrightNotice"],[118,"Contact"],[120,"Caption"],[121,"LocalCaption"],[122,"Writer"],[125,"RasterizedCaption"],[130,"ImageType"],[131,"ImageOrientation"],[135,"LanguageIdentifier"],[150,"AudioType"],[151,"AudioSamplingRate"],[152,"AudioSamplingResolution"],[153,"AudioDuration"],[154,"AudioOutcue"],[184,"JobID"],[185,"MasterDocumentID"],[186,"ShortDocumentID"],[187,"UniqueDocumentID"],[188,"OwnerID"],[200,"ObjectPreviewFileFormat"],[201,"ObjectPreviewFileVersion"],[202,"ObjectPreviewData"],[221,"Prefs"],[225,"ClassifyState"],[228,"SimilarityIndex"],[230,"DocumentNotes"],[231,"DocumentHistory"],[232,"ExifCameraInfo"],[255,"CatalogSets"]]),y(I,"iptc",[[10,{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"}],[75,{a:"Morning",b:"Both Morning and Evening",p:"Evening"}],[131,{L:"Landscape",P:"Portrait",S:"Square"}]]);const qt=Wt}}]);