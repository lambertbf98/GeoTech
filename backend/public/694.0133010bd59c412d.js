"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[694],{3366:(F,b,s)=>{s.d(b,{G:()=>_});var u=s(9330),c=s(5312),g=s(2615);let _=(()=>{var h;class d{constructor(r){this.http=r,this.baseUrl=c.c.apiUrl}getHeaders(){const r=localStorage.getItem("token");let a=new u.Lr({"Content-Type":"application/json"});return r&&(a=a.set("Authorization",`Bearer ${r}`)),a}get(r){return this.http.get(`${this.baseUrl}${r}`,{headers:this.getHeaders()})}post(r,a){return this.http.post(`${this.baseUrl}${r}`,a,{headers:this.getHeaders()})}put(r,a){return this.http.put(`${this.baseUrl}${r}`,a,{headers:this.getHeaders()})}delete(r){return this.http.delete(`${this.baseUrl}${r}`,{headers:this.getHeaders()})}uploadFile(r,a){const m=localStorage.getItem("token");let v=new u.Lr;return m&&(v=v.set("Authorization",`Bearer ${m}`)),this.http.post(`${this.baseUrl}${r}`,a,{headers:v})}createReport(r,a,m){return this.post("/reports",{projectId:r,name:a,htmlContent:m})}getReportsByProject(r){return this.get(`/reports/project/${r}`)}getReport(r){return this.get(`/reports/${r}`)}deleteReport(r){return this.delete(`/reports/${r}`)}createKml(r,a,m){return this.post("/reports/kml",{projectId:r,name:a,kmlContent:m})}getKmlsByProject(r){return this.get(`/reports/kml/project/${r}`)}getKml(r){return this.get(`/reports/kml/${r}`)}deleteKml(r){return this.delete(`/reports/kml/${r}`)}static#e=h=()=>(this.\u0275fac=function(a){return new(a||d)(g.KVO(u.Qq))},this.\u0275prov=g.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}))}return h(),d})()},3825:(F,b,s)=>{s.r(b),s.d(b,{RegisterPageModule:()=>L});var u=s(2200),c=s(4341),g=s(7343),_=s(8132),h=s(467),d=s(4843),e=s(3664),r=s(4796),a=s(1924);function m(n,l){if(1&n&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&n){const f=e.XpG();e.R7$(),e.SpI(" ",f.getErrorMessage("name")," ")}}function v(n,l){if(1&n&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&n){const f=e.XpG();e.R7$(),e.SpI(" ",f.getErrorMessage("email")," ")}}function O(n,l){if(1&n&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&n){const f=e.XpG();e.R7$(),e.SpI(" ",f.getErrorMessage("password")," ")}}function R(n,l){if(1&n&&(e.j41(0,"span",30),e.EFF(1),e.k0s()),2&n){const f=e.XpG();e.R7$(),e.SpI(" ",f.getErrorMessage("confirmPassword")," ")}}function $(n,l){1&n&&e.nrm(0,"ion-spinner",31)}function j(n,l){1&n&&(e.j41(0,"span"),e.EFF(1,"Crear cuenta"),e.k0s())}let I=(()=>{var n;class l{constructor(o,i,t,p){this.fb=o,this.authService=i,this.router=t,this.toastCtrl=p,this.showPassword=!1,this.showConfirmPassword=!1,this.isLoading=!1,this.registerForm=this.fb.group({name:["",[c.k0.required,c.k0.minLength(2)]],email:["",[c.k0.required,c.k0.email]],password:["",[c.k0.required,c.k0.minLength(6)]],confirmPassword:["",[c.k0.required]]},{validators:this.passwordMatchValidator})}ngOnInit(){}passwordMatchValidator(o){const i=o.get("password"),t=o.get("confirmPassword");return i&&t&&i.value!==t.value&&t.setErrors({passwordMismatch:!0}),null}togglePassword(){this.showPassword=!this.showPassword}toggleConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword}onRegister(){var o=this;return(0,h.A)(function*(){if(o.registerForm.invalid)o.markFormTouched();else{o.isLoading=!0;try{const{name:i,email:t,password:p}=o.registerForm.value;yield(0,d._)(o.authService.register({name:i,email:t,password:p})),yield(yield o.toastCtrl.create({message:"Cuenta creada exitosamente. Bienvenido a GeoTech!",duration:3e3,position:"bottom",color:"success",icon:"checkmark-circle-outline"})).present(),o.router.navigate(["/tabs/projects"],{replaceUrl:!0})}catch(i){o.isLoading=!1,yield(yield o.toastCtrl.create({message:i.message||"Error al crear la cuenta. Intentalo de nuevo.",duration:3e3,position:"bottom",color:"danger",icon:"alert-circle-outline"})).present()}}})()}goToLogin(){this.router.navigate(["/login"])}markFormTouched(){Object.keys(this.registerForm.controls).forEach(o=>{this.registerForm.controls[o].markAsTouched()})}getErrorMessage(o){const i=this.registerForm.get(o);return i?.hasError("required")?"Este campo es obligatorio":i?.hasError("email")?"Introduce un email valido":i?.hasError("minlength")?"name"===o?"El nombre debe tener al menos 2 caracteres":"La contrasena debe tener al menos 6 caracteres":i?.hasError("passwordMismatch")?"Las contrasenas no coinciden":""}static#e=n=()=>(this.\u0275fac=function(i){return new(i||l)(e.rXU(c.ok),e.rXU(r.u),e.rXU(a.Ix),e.rXU(g.K_))},this.\u0275cmp=e.VBU({type:l,selectors:[["app-register"]],standalone:!1,decls:56,vars:20,consts:[[1,"register-content"],[1,"register-container"],[1,"register-header"],["fill","clear",1,"back-btn",3,"click"],["name","arrow-back","slot","icon-only"],[1,"header-text"],[1,"page-title"],[1,"page-subtitle"],[1,"register-form-container"],[3,"ngSubmit","formGroup"],[1,"geotech-form-group"],[1,"geotech-label"],["lines","none",1,"input-item"],["name","person-outline","slot","start",1,"input-icon"],["type","text","formControlName","name","autocomplete","name"],["class","error-text",4,"ngIf"],["name","mail-outline","slot","start",1,"input-icon"],["type","email","formControlName","email","autocomplete","email","inputmode","email"],["name","lock-closed-outline","slot","start",1,"input-icon"],["formControlName","password","autocomplete","new-password",3,"type"],["fill","clear","slot","end",1,"password-toggle",3,"click"],["slot","icon-only",3,"name"],["formControlName","confirmPassword","autocomplete","new-password",3,"type"],[1,"terms-info"],["name","information-circle-outline"],["expand","block","type","submit",1,"geotech-btn-primary","register-btn",3,"disabled"],["name","crescent",4,"ngIf"],[4,"ngIf"],[1,"login-link"],["fill","clear","size","small",3,"click"],[1,"error-text"],["name","crescent"]],template:function(i,t){if(1&i&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"ion-button",3),e.bIt("click",function(){return t.goToLogin()}),e.nrm(4,"ion-icon",4),e.k0s(),e.j41(5,"div",5)(6,"h1",6),e.EFF(7,"Crear cuenta"),e.k0s(),e.j41(8,"p",7),e.EFF(9,"Unete a GeoTech y gestiona tus proyectos"),e.k0s()()(),e.j41(10,"div",8)(11,"form",9),e.bIt("ngSubmit",function(){return t.onRegister()}),e.j41(12,"div",10)(13,"label",11),e.EFF(14,"Nombre completo"),e.k0s(),e.j41(15,"ion-item",12),e.nrm(16,"ion-icon",13)(17,"ion-input",14),e.k0s(),e.DNE(18,m,2,1,"span",15),e.k0s(),e.j41(19,"div",10)(20,"label",11),e.EFF(21,"Correo electronico"),e.k0s(),e.j41(22,"ion-item",12),e.nrm(23,"ion-icon",16)(24,"ion-input",17),e.k0s(),e.DNE(25,v,2,1,"span",15),e.k0s(),e.j41(26,"div",10)(27,"label",11),e.EFF(28,"Contrasena"),e.k0s(),e.j41(29,"ion-item",12),e.nrm(30,"ion-icon",18)(31,"ion-input",19),e.j41(32,"ion-button",20),e.bIt("click",function(){return t.togglePassword()}),e.nrm(33,"ion-icon",21),e.k0s()(),e.DNE(34,O,2,1,"span",15),e.k0s(),e.j41(35,"div",10)(36,"label",11),e.EFF(37,"Confirmar contrasena"),e.k0s(),e.j41(38,"ion-item",12),e.nrm(39,"ion-icon",18)(40,"ion-input",22),e.j41(41,"ion-button",20),e.bIt("click",function(){return t.toggleConfirmPassword()}),e.nrm(42,"ion-icon",21),e.k0s()(),e.DNE(43,R,2,1,"span",15),e.k0s(),e.j41(44,"div",23),e.nrm(45,"ion-icon",24),e.j41(46,"span"),e.EFF(47,"Al crear una cuenta, aceptas nuestros terminos de servicio y politica de privacidad."),e.k0s()(),e.j41(48,"ion-button",25),e.DNE(49,$,1,0,"ion-spinner",26)(50,j,2,0,"span",27),e.k0s()(),e.j41(51,"div",28)(52,"span"),e.EFF(53,"Ya tienes una cuenta?"),e.k0s(),e.j41(54,"ion-button",29),e.bIt("click",function(){return t.goToLogin()}),e.EFF(55," Iniciar sesion "),e.k0s()()()()()),2&i){let p,P,k,x,w,C,y,M;e.R7$(11),e.Y8G("formGroup",t.registerForm),e.R7$(4),e.AVh("input-error",(null==(p=t.registerForm.get("name"))?null:p.invalid)&&(null==(p=t.registerForm.get("name"))?null:p.touched)),e.R7$(3),e.Y8G("ngIf",(null==(P=t.registerForm.get("name"))?null:P.invalid)&&(null==(P=t.registerForm.get("name"))?null:P.touched)),e.R7$(4),e.AVh("input-error",(null==(k=t.registerForm.get("email"))?null:k.invalid)&&(null==(k=t.registerForm.get("email"))?null:k.touched)),e.R7$(3),e.Y8G("ngIf",(null==(x=t.registerForm.get("email"))?null:x.invalid)&&(null==(x=t.registerForm.get("email"))?null:x.touched)),e.R7$(4),e.AVh("input-error",(null==(w=t.registerForm.get("password"))?null:w.invalid)&&(null==(w=t.registerForm.get("password"))?null:w.touched)),e.R7$(2),e.Y8G("type",t.showPassword?"text":"password"),e.R7$(2),e.Y8G("name",t.showPassword?"eye-off-outline":"eye-outline"),e.R7$(),e.Y8G("ngIf",(null==(C=t.registerForm.get("password"))?null:C.invalid)&&(null==(C=t.registerForm.get("password"))?null:C.touched)),e.R7$(4),e.AVh("input-error",(null==(y=t.registerForm.get("confirmPassword"))?null:y.invalid)&&(null==(y=t.registerForm.get("confirmPassword"))?null:y.touched)),e.R7$(2),e.Y8G("type",t.showConfirmPassword?"text":"password"),e.R7$(2),e.Y8G("name",t.showConfirmPassword?"eye-off-outline":"eye-outline"),e.R7$(),e.Y8G("ngIf",(null==(M=t.registerForm.get("confirmPassword"))?null:M.invalid)&&(null==(M=t.registerForm.get("confirmPassword"))?null:M.touched)),e.R7$(5),e.Y8G("disabled",t.isLoading),e.R7$(),e.Y8G("ngIf",t.isLoading),e.R7$(),e.Y8G("ngIf",!t.isLoading)}},dependencies:[u.bT,c.qT,c.BC,c.cb,c.j4,c.JD,g.Jm,g.W9,g.iq,g.$w,g.uz,g.w2,g.Gw],styles:[".register-content[_ngcontent-%COMP%]{--background: var(--geotech-bg-dark)}.register-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;padding:20px;padding-top:calc(20px + var(--ion-safe-area-top));padding-bottom:calc(20px + var(--ion-safe-area-bottom))}.register-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;margin-bottom:28px}.back-btn[_ngcontent-%COMP%]{--color: var(--geotech-accent-cyan);margin:4px 0 0}.back-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:26px}.back-btn[_ngcontent-%COMP%]:hover{--color: var(--geotech-text-primary)}.header-text[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{font-size:30px;font-weight:700;color:var(--geotech-text-primary);margin:0 0 6px;letter-spacing:-.5px}.page-subtitle[_ngcontent-%COMP%]{font-size:15px;color:var(--geotech-text-secondary);margin:0;font-weight:400}.register-form-container[_ngcontent-%COMP%]{background:var(--geotech-bg-glass);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:24px;padding:28px 24px;border:1px solid var(--geotech-border-glass);box-shadow:var(--geotech-shadow-lg);flex:1;display:flex;flex-direction:column}.geotech-form-group[_ngcontent-%COMP%]{margin-bottom:20px}.geotech-label[_ngcontent-%COMP%]{display:block;font-size:.7rem;font-weight:700;color:var(--geotech-accent-cyan);margin-bottom:10px;text-transform:uppercase;letter-spacing:1.5px}.input-item[_ngcontent-%COMP%]{--background: rgba(0, 0, 0, .3) !important;--border-radius: 14px !important;--padding-start: 16px;--padding-end: 16px;--min-height: 54px;--color: var(--geotech-text-primary);background:#0000004d!important;border:1px solid var(--geotech-border-glass)!important;border-radius:14px!important;transition:all .3s ease}.input-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: var(--geotech-text-primary) !important;--placeholder-color: var(--geotech-text-muted) !important}.input-item.item-has-focus[_ngcontent-%COMP%]{border-color:var(--geotech-accent-cyan)!important;box-shadow:0 0 20px #00d4ff33}.input-item.input-error[_ngcontent-%COMP%]{border-color:var(--geotech-accent-red)!important}.input-icon[_ngcontent-%COMP%]{color:var(--geotech-accent-cyan)!important;font-size:20px;margin-right:12px}.password-toggle[_ngcontent-%COMP%]{--color: var(--geotech-text-muted);margin:0;height:40px}.password-toggle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.password-toggle[_ngcontent-%COMP%]:hover{--color: var(--geotech-accent-cyan)}.error-text[_ngcontent-%COMP%]{display:block;font-size:12px;color:var(--geotech-accent-red);margin-top:8px;padding-left:4px}.terms-info[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px;background:#00d4ff14;border:1px solid rgba(0,212,255,.15);border-radius:14px;margin-bottom:24px;align-items:flex-start}.terms-info[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--geotech-accent-cyan);font-size:20px;flex-shrink:0;margin-top:2px}.terms-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:var(--geotech-text-secondary);line-height:1.6}.register-btn[_ngcontent-%COMP%]{--background: linear-gradient(135deg, var(--geotech-accent-cyan), #0099cc) !important;--background-hover: var(--geotech-accent-cyan);--border-radius: 14px;--box-shadow: var(--geotech-glow-cyan);height:54px;font-size:16px;font-weight:700;text-transform:none;letter-spacing:0;margin-bottom:20px;color:var(--geotech-bg-dark)!important}.register-btn[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:24px;height:24px;color:var(--geotech-bg-dark)}.login-link[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:4px;margin-top:auto;padding-top:16px;border-top:1px solid var(--geotech-border-glass)}.login-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:var(--geotech-text-muted)}.login-link[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: var(--geotech-accent-cyan);font-size:14px;font-weight:700;text-transform:none;letter-spacing:0}"]}))}return n(),l})();var E=s(2615);const T=[{path:"",component:I}];let G=(()=>{var n;class l{static#e=n=()=>(this.\u0275fac=function(i){return new(i||l)},this.\u0275mod=e.$C({type:l}),this.\u0275inj=E.G2t({imports:[_.iI.forChild(T),_.iI]}))}return n(),l})(),L=(()=>{var n;class l{static#e=n=()=>(this.\u0275fac=function(i){return new(i||l)},this.\u0275mod=e.$C({type:l}),this.\u0275inj=E.G2t({imports:[u.MD,c.YN,c.X1,g.bv,G]}))}return n(),l})()},4843:(F,b,s)=>{s.d(b,{_:()=>g});var u=s(9350),c=s(7707);function g(_,h){const d="object"==typeof h;return new Promise((e,r)=>{const a=new c.Ms({next:m=>{e(m),a.unsubscribe()},error:r,complete:()=>{d?e(h.defaultValue):r(new u.G)}});_.subscribe(a)})}}}]);