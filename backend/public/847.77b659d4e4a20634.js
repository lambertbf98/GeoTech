"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[847],{3366:(C,b,n)=>{n.d(b,{G:()=>v});var h=n(9330),c=n(5312),g=n(2615);let v=(()=>{var u;class m{constructor(e){this.http=e,this.baseUrl=c.c.apiUrl}getHeaders(){const e=localStorage.getItem("token");let i=new h.Lr({"Content-Type":"application/json"});return e&&(i=i.set("Authorization",`Bearer ${e}`)),i}get(e){return this.http.get(`${this.baseUrl}${e}`,{headers:this.getHeaders()})}post(e,i){return this.http.post(`${this.baseUrl}${e}`,i,{headers:this.getHeaders()})}put(e,i){return this.http.put(`${this.baseUrl}${e}`,i,{headers:this.getHeaders()})}delete(e){return this.http.delete(`${this.baseUrl}${e}`,{headers:this.getHeaders()})}uploadFile(e,i){const d=localStorage.getItem("token");let x=new h.Lr;return d&&(x=x.set("Authorization",`Bearer ${d}`)),this.http.post(`${this.baseUrl}${e}`,i,{headers:x})}createReport(e,i,d){return this.post("/reports",{projectId:e,name:i,htmlContent:d})}getReportsByProject(e){return this.get(`/reports/project/${e}`)}getReport(e){return this.get(`/reports/${e}`)}deleteReport(e){return this.delete(`/reports/${e}`)}createKml(e,i,d){return this.post("/reports/kml",{projectId:e,name:i,kmlContent:d})}getKmlsByProject(e){return this.get(`/reports/kml/project/${e}`)}getKml(e){return this.get(`/reports/kml/${e}`)}deleteKml(e){return this.delete(`/reports/kml/${e}`)}static#t=u=()=>(this.\u0275fac=function(i){return new(i||m)(g.KVO(h.Qq))},this.\u0275prov=g.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}))}return u(),m})()},4843:(C,b,n)=>{n.d(b,{_:()=>g});var h=n(9350),c=n(7707);function g(v,u){const m="object"==typeof u;return new Promise((t,e)=>{const i=new c.Ms({next:d=>{t(d),i.unsubscribe()},error:e,complete:()=>{m?t(u.defaultValue):e(new h.G)}});v.subscribe(i)})}},6688:(C,b,n)=>{n.r(b),n.d(b,{LoginPageModule:()=>$});var h=n(2200),c=n(4341),g=n(7343),v=n(8132),u=n(467),m=n(4843),t=n(3664),e=n(4796),i=n(1924);function d(s,l){if(1&s&&(t.j41(0,"span",30),t.EFF(1),t.k0s()),2&s){const P=t.XpG();t.R7$(),t.SpI(" ",P.getErrorMessage("email")," ")}}function x(s,l){if(1&s&&(t.j41(0,"span",30),t.EFF(1),t.k0s()),2&s){const P=t.XpG();t.R7$(),t.SpI(" ",P.getErrorMessage("password")," ")}}function M(s,l){1&s&&t.nrm(0,"ion-spinner",31)}function O(s,l){1&s&&(t.j41(0,"span"),t.EFF(1,"Iniciar Sesion"),t.k0s())}let y=(()=>{var s;class l{constructor(r,a,o,p,f){this.fb=r,this.authService=a,this.router=o,this.toastCtrl=p,this.alertCtrl=f,this.showPassword=!1,this.isLoading=!1,this.loginForm=this.fb.group({email:["",[c.k0.required,c.k0.email]],password:["",[c.k0.required,c.k0.minLength(6)]]})}ngOnInit(){this.authService.isAuthenticated&&this.router.navigate(["/tabs/projects"])}togglePassword(){this.showPassword=!this.showPassword}onLogin(){var r=this;return(0,u.A)(function*(){if(r.loginForm.invalid)r.markFormTouched();else{r.isLoading=!0;try{const{email:a,password:o}=r.loginForm.value;yield(0,m._)(r.authService.login({email:a,password:o})),r.router.navigate(["/tabs/projects"],{replaceUrl:!0})}catch(a){r.isLoading=!1,yield(yield r.toastCtrl.create({message:a.message||"Error al iniciar sesion. Verifica tus credenciales.",duration:3e3,position:"bottom",color:"danger",icon:"alert-circle-outline"})).present()}}})()}goToRegister(){this.router.navigate(["/register"])}forgotPassword(){var r=this;return(0,u.A)(function*(){var o;yield(yield r.alertCtrl.create({header:"Recuperar contrasena",message:"Introduce tu email y te enviaremos instrucciones para recuperar tu contrasena.",inputs:[{name:"email",type:"email"}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Enviar",handler:(o=(0,u.A)(function*(p){p.email&&(yield(yield r.toastCtrl.create({message:"Si el email existe, recibiras instrucciones para recuperar tu contrasena.",duration:4e3,position:"bottom",color:"success"})).present())}),function(f){return o.apply(this,arguments)})}]})).present()})()}markFormTouched(){Object.keys(this.loginForm.controls).forEach(r=>{this.loginForm.controls[r].markAsTouched()})}getErrorMessage(r){const a=this.loginForm.get(r);return a?.hasError("required")?"Este campo es obligatorio":a?.hasError("email")?"Introduce un email valido":a?.hasError("minlength")?"La contrasena debe tener al menos 6 caracteres":""}static#t=s=()=>(this.\u0275fac=function(a){return new(a||l)(t.rXU(c.ok),t.rXU(e.u),t.rXU(i.Ix),t.rXU(g.K_),t.rXU(g.hG))},this.\u0275cmp=t.VBU({type:l,selectors:[["app-login"]],standalone:!1,decls:45,vars:12,consts:[[1,"login-content"],[1,"login-container"],[1,"login-header"],[1,"logo-container"],["name","earth-outline",1,"logo-icon"],[1,"app-title"],[1,"app-subtitle"],[1,"login-form-container"],[3,"ngSubmit","formGroup"],[1,"geotech-form-group"],[1,"geotech-label"],["lines","none",1,"input-item"],["name","mail-outline","slot","start",1,"input-icon"],["type","email","formControlName","email","autocomplete","email","inputmode","email"],["class","error-text",4,"ngIf"],["name","lock-closed-outline","slot","start",1,"input-icon"],["formControlName","password","autocomplete","current-password",3,"type"],["fill","clear","slot","end",1,"password-toggle",3,"click"],["slot","icon-only",3,"name"],[1,"forgot-password"],["fill","clear","size","small",1,"forgot-btn",3,"click"],["expand","block","type","submit",1,"geotech-btn-primary","login-btn",3,"disabled"],["name","crescent",4,"ngIf"],[4,"ngIf"],[1,"divider"],[1,"divider-line"],[1,"divider-text"],["expand","block","fill","outline",1,"geotech-btn-secondary","register-btn",3,"click"],[1,"login-footer"],[1,"footer-text"],[1,"error-text"],["name","crescent"]],template:function(a,o){if(1&a&&(t.j41(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3),t.nrm(4,"ion-icon",4),t.k0s(),t.j41(5,"h1",5),t.EFF(6,"GeoTech"),t.k0s(),t.j41(7,"p",6),t.EFF(8,"Gestion de proyectos de ingenieria civil"),t.k0s()(),t.j41(9,"div",7)(10,"form",8),t.bIt("ngSubmit",function(){return o.onLogin()}),t.j41(11,"div",9)(12,"label",10),t.EFF(13,"Correo electronico"),t.k0s(),t.j41(14,"ion-item",11),t.nrm(15,"ion-icon",12)(16,"ion-input",13),t.k0s(),t.DNE(17,d,2,1,"span",14),t.k0s(),t.j41(18,"div",9)(19,"label",10),t.EFF(20,"Contrasena"),t.k0s(),t.j41(21,"ion-item",11),t.nrm(22,"ion-icon",15)(23,"ion-input",16),t.j41(24,"ion-button",17),t.bIt("click",function(){return o.togglePassword()}),t.nrm(25,"ion-icon",18),t.k0s()(),t.DNE(26,x,2,1,"span",14),t.k0s(),t.j41(27,"div",19)(28,"ion-button",20),t.bIt("click",function(){return o.forgotPassword()}),t.EFF(29," Olvidaste tu contrasena? "),t.k0s()(),t.j41(30,"ion-button",21),t.DNE(31,M,1,0,"ion-spinner",22)(32,O,2,0,"span",23),t.k0s()(),t.j41(33,"div",24),t.nrm(34,"span",25),t.j41(35,"span",26),t.EFF(36,"o"),t.k0s(),t.nrm(37,"span",25),t.k0s(),t.j41(38,"ion-button",27),t.bIt("click",function(){return o.goToRegister()}),t.EFF(39," Crear una cuenta nueva "),t.k0s()(),t.j41(40,"div",28)(41,"p",29),t.EFF(42,"GeoTech v1.0.0"),t.k0s(),t.j41(43,"p",29),t.EFF(44,"Aplicacion profesional para ingenieria civil"),t.k0s()()()()),2&a){let p,f,k,_;t.R7$(10),t.Y8G("formGroup",o.loginForm),t.R7$(4),t.AVh("input-error",(null==(p=o.loginForm.get("email"))?null:p.invalid)&&(null==(p=o.loginForm.get("email"))?null:p.touched)),t.R7$(3),t.Y8G("ngIf",(null==(f=o.loginForm.get("email"))?null:f.invalid)&&(null==(f=o.loginForm.get("email"))?null:f.touched)),t.R7$(4),t.AVh("input-error",(null==(k=o.loginForm.get("password"))?null:k.invalid)&&(null==(k=o.loginForm.get("password"))?null:k.touched)),t.R7$(2),t.Y8G("type",o.showPassword?"text":"password"),t.R7$(2),t.Y8G("name",o.showPassword?"eye-off-outline":"eye-outline"),t.R7$(),t.Y8G("ngIf",(null==(_=o.loginForm.get("password"))?null:_.invalid)&&(null==(_=o.loginForm.get("password"))?null:_.touched)),t.R7$(4),t.Y8G("disabled",o.isLoading),t.R7$(),t.Y8G("ngIf",o.isLoading),t.R7$(),t.Y8G("ngIf",!o.isLoading)}},dependencies:[h.bT,c.qT,c.BC,c.cb,c.j4,c.JD,g.Jm,g.W9,g.iq,g.$w,g.uz,g.w2,g.Gw],styles:["input[_ngcontent-%COMP%]:-webkit-autofill, input[_ngcontent-%COMP%]:-webkit-autofill:hover, input[_ngcontent-%COMP%]:-webkit-autofill:focus, input[_ngcontent-%COMP%]:-webkit-autofill:active{-webkit-box-shadow:0 0 0 1000px #0a0a0f inset!important;-webkit-text-fill-color:#ffffff!important;background-color:#0a0a0f!important;caret-color:#fff!important;font-size:16px!important;-webkit-transition:background-color 9999s ease-in-out 0s!important;transition:background-color 9999s ease-in-out 0s!important;transition-delay:9999s!important}ion-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill, ion-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:hover, ion-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:focus, ion-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-webkit-autofill:active{-webkit-box-shadow:0 0 0 1000px #0a0a0f inset!important;-webkit-text-fill-color:#ffffff!important;background-color:#0a0a0f!important;caret-color:#fff!important}@media screen and (-webkit-min-device-pixel-ratio: 0){input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-size:16px!important}}.login-content[_ngcontent-%COMP%]{--background: var(--geotech-bg-dark)}.login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100%;padding:24px;padding-top:calc(24px + var(--ion-safe-area-top));padding-bottom:calc(24px + var(--ion-safe-area-bottom));background:linear-gradient(180deg,rgba(0,212,255,.05) 0%,var(--geotech-bg-dark) 50%)}.login-header[_ngcontent-%COMP%]{text-align:center;padding:48px 0 40px}.logo-container[_ngcontent-%COMP%]{width:100px;height:100px;background:var(--geotech-bg-glass);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-radius:28px;display:flex;align-items:center;justify-content:center;margin:0 auto 24px;border:1px solid var(--geotech-border-glass);box-shadow:var(--geotech-glow-cyan)}.logo-icon[_ngcontent-%COMP%]{font-size:52px;color:var(--geotech-accent-cyan);filter:drop-shadow(0 0 10px var(--geotech-accent-cyan))}.app-title[_ngcontent-%COMP%]{font-size:36px;font-weight:700;color:var(--geotech-text-primary);margin:0 0 8px;letter-spacing:-.5px}.app-subtitle[_ngcontent-%COMP%]{font-size:15px;color:var(--geotech-text-secondary);margin:0;font-weight:400}.login-form-container[_ngcontent-%COMP%]{background:var(--geotech-bg-glass);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:24px;padding:32px 24px;border:1px solid var(--geotech-border-glass);box-shadow:var(--geotech-shadow-lg);flex:1;display:flex;flex-direction:column}.geotech-form-group[_ngcontent-%COMP%]{margin-bottom:24px}.geotech-label[_ngcontent-%COMP%]{display:block;font-size:.7rem;font-weight:700;color:var(--geotech-accent-cyan);margin-bottom:10px;text-transform:uppercase;letter-spacing:1.5px}.input-item[_ngcontent-%COMP%]{--background: rgba(0, 0, 0, .3) !important;--border-radius: 14px !important;--padding-start: 16px;--padding-end: 16px;--min-height: 56px;--color: var(--geotech-text-primary);background:#0000004d!important;border:1px solid var(--geotech-border-glass)!important;border-radius:14px!important;transition:all .3s ease}.input-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: var(--geotech-text-primary) !important;--placeholder-color: var(--geotech-text-muted) !important}.input-item.item-has-focus[_ngcontent-%COMP%]{border-color:var(--geotech-accent-cyan)!important;box-shadow:0 0 20px #00d4ff33}.input-item.input-error[_ngcontent-%COMP%]{border-color:var(--geotech-accent-red)!important}.input-icon[_ngcontent-%COMP%]{color:var(--geotech-accent-cyan)!important;font-size:22px;margin-right:12px}.password-toggle[_ngcontent-%COMP%]{--color: var(--geotech-text-muted);margin:0;height:40px}.password-toggle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px}.password-toggle[_ngcontent-%COMP%]:hover{--color: var(--geotech-accent-cyan)}.error-text[_ngcontent-%COMP%]{display:block;font-size:12px;color:var(--geotech-accent-red);margin-top:8px;padding-left:4px}.forgot-password[_ngcontent-%COMP%]{text-align:right;margin-bottom:28px;margin-top:-12px}.forgot-btn[_ngcontent-%COMP%]{--color: var(--geotech-accent-cyan);font-size:13px;font-weight:600;text-transform:none;letter-spacing:0}.login-btn[_ngcontent-%COMP%]{--background: linear-gradient(135deg, var(--geotech-accent-cyan), #0099cc) !important;--background-hover: var(--geotech-accent-cyan);--border-radius: 14px;--box-shadow: var(--geotech-glow-cyan);height:56px;font-size:16px;font-weight:700;text-transform:none;letter-spacing:0;margin-bottom:28px;color:var(--geotech-bg-dark)!important}.login-btn[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:24px;height:24px;color:var(--geotech-bg-dark)}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;margin-bottom:28px}.divider-line[_ngcontent-%COMP%]{flex:1;height:1px;background:var(--geotech-border-glass)}.divider-text[_ngcontent-%COMP%]{color:var(--geotech-text-muted);font-size:13px;font-weight:600;text-transform:uppercase;letter-spacing:1px}.register-btn[_ngcontent-%COMP%]{--border-color: var(--geotech-border-glass) !important;--border-width: 1px;--color: var(--geotech-text-primary);--background: var(--geotech-bg-glass-light);--border-radius: 14px;height:56px;font-size:16px;font-weight:600;text-transform:none;letter-spacing:0;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.register-btn[_ngcontent-%COMP%]:hover{--background: rgba(255, 255, 255, .1)}.login-footer[_ngcontent-%COMP%]{text-align:center;padding-top:32px;margin-top:auto}.footer-text[_ngcontent-%COMP%]{font-size:12px;color:var(--geotech-text-muted);margin:0;line-height:1.8}"]}))}return s(),l})();var w=n(2615);const F=[{path:"",component:y}];let E=(()=>{var s;class l{static#t=s=()=>(this.\u0275fac=function(a){return new(a||l)},this.\u0275mod=t.$C({type:l}),this.\u0275inj=w.G2t({imports:[v.iI.forChild(F),v.iI]}))}return s(),l})(),$=(()=>{var s;class l{static#t=s=()=>(this.\u0275fac=function(a){return new(a||l)},this.\u0275mod=t.$C({type:l}),this.\u0275inj=w.G2t({imports:[h.MD,c.YN,c.X1,g.bv,E]}))}return s(),l})()}}]);